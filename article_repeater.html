<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta name="HandheldFriendly" content="True"/>
		<meta name="MobileOptimized" content="320"/>
		<meta name="theme-color" content="#000000"/>
		<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1"/>
		<title>Strand Web Components</title>
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
		<link rel="apple-touch-icon" href="apple-iphone-icon@2x.png" sizes="120x120" type="image/png" />
		<link rel="apple-touch-icon" href="apple-ipad-icon@2x.png" sizes="152x152" type="image/png" />
		<script language="javascript" src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
		<link rel="stylesheet" type="text/css" href="docs.css"/>
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/github.min.css">
		<link rel="import" href="bower_components/strand/dist/strand.html"/>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.min.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/mode-html.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/theme-chrome.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/worker-html.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
		<script language="javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
	</head>
	<body unresolved>
		<strand-docs-shell id="docsShell" version="4.1.0" mobileHeader="Strand Docs">
			<strand-docs-nav id="articlesNav">
				<strand-header size="medium">Articles</strand-header>
				<strand-list-item id="getting_started" value="article_getting_started.html">Getting Started</strand-list-item>
				<strand-list-item id="data_comps_intro" value="article_data_comps_intro.html">Introduction to Data Components</strand-list-item>
				<strand-list-item id="data_comps_using_ajax" value="article_data_comps_using_ajax.html" class="child"> Using strand-ajax</strand-list-item>
				<strand-list-item id="data_comps_using_sync" value="article_data_comps_using_sync.html" class="child"> Using strand-sync</strand-list-item>
				<strand-list-item id="grid_intro" value="article_grid_intro.html">Introduction to strand-grid</strand-list-item>
				<strand-list-item id="grid_config" value="article_grid_config.html" class="child"> Configuring strand-grid</strand-list-item>
				<strand-list-item id="grid_data_integration" value="article_grid_data_integration.html" class="child"> Data Integration with strand-grid</strand-list-item>
				<strand-list-item id="grid_custom_grid_item" value="article_grid_custom_grid_item.html" class="child"> Creating Custom Grid Items</strand-list-item>
				<strand-list-item id="migration_guide" value="article_migration_guide.html">Migration Guide</strand-list-item>
				<strand-list-item id="repeater" value="article_repeater.html">Working with strand-repeater</strand-list-item>
			</strand-docs-nav>
			<strand-docs-nav id="componentsNav">
				<strand-header size="medium">Components</strand-header>
				<strand-list-item id="strand-action" value="strand-action.html">strand-action</strand-list-item>
				<strand-list-item id="strand-ajax" value="strand-ajax.html">strand-ajax</strand-list-item>
				<strand-list-item id="strand-autocomplete" value="strand-autocomplete.html">strand-autocomplete</strand-list-item>
				<strand-list-item id="strand-box" value="strand-box.html">strand-box</strand-list-item>
				<strand-list-item id="strand-button" value="strand-button.html">strand-button</strand-list-item>
				<strand-list-item id="strand-calendar" value="strand-calendar.html">strand-calendar</strand-list-item>
				<strand-list-item id="strand-checkbox" value="strand-checkbox.html">strand-checkbox</strand-list-item>
				<strand-list-item id="strand-collection" value="strand-collection.html">strand-collection</strand-list-item>
				<strand-list-item id="strand-datepicker-panel" value="strand-datepicker-panel.html">strand-datepicker-panel</strand-list-item>
				<strand-list-item id="strand-datepicker" value="strand-datepicker.html">strand-datepicker</strand-list-item>
				<strand-list-item id="strand-dialog" value="strand-dialog.html">strand-dialog</strand-list-item>
				<strand-list-item id="strand-drawer" value="strand-drawer.html">strand-drawer</strand-list-item>
				<strand-list-item id="strand-dropdown" value="strand-dropdown.html">strand-dropdown</strand-list-item>
				<strand-list-item id="strand-file-upload" value="strand-file-upload.html">strand-file-upload</strand-list-item>
				<strand-list-item id="strand-footer" value="strand-footer.html">strand-footer</strand-list-item>
				<strand-list-item id="strand-form" value="strand-form.html">strand-form</strand-list-item>
				<strand-list-item id="strand-grid-column" value="strand-grid-column.html">strand-grid-column</strand-list-item>
				<strand-list-item id="strand-grid-item" value="strand-grid-item.html">strand-grid-item</strand-list-item>
				<strand-list-item id="strand-grid" value="strand-grid.html">strand-grid</strand-list-item>
				<strand-list-item id="strand-group" value="strand-group.html">strand-group</strand-list-item>
				<strand-list-item id="strand-guide" value="strand-guide.html">strand-guide</strand-list-item>
				<strand-list-item id="strand-header" value="strand-header.html">strand-header</strand-list-item>
				<strand-list-item id="strand-icon" value="strand-icon.html">strand-icon</strand-list-item>
				<strand-list-item id="strand-inline-box" value="strand-inline-box.html">strand-inline-box</strand-list-item>
				<strand-list-item id="strand-input-mask" value="strand-input-mask.html">strand-input-mask</strand-list-item>
				<strand-list-item id="strand-input" value="strand-input.html">strand-input</strand-list-item>
				<strand-list-item id="strand-list-item" value="strand-list-item.html">strand-list-item</strand-list-item>
				<strand-list-item id="strand-loader" value="strand-loader.html">strand-loader</strand-list-item>
				<strand-list-item id="strand-localstore" value="strand-localstore.html">strand-localstore</strand-list-item>
				<strand-list-item id="strand-menu" value="strand-menu.html">strand-menu</strand-list-item>
				<strand-list-item id="strand-modal" value="strand-modal.html">strand-modal</strand-list-item>
				<strand-list-item id="strand-model" value="strand-model.html">strand-model</strand-list-item>
				<strand-list-item id="strand-popover" value="strand-popover.html">strand-popover</strand-list-item>
				<strand-list-item id="strand-progress-bar" value="strand-progress-bar.html">strand-progress-bar</strand-list-item>
				<strand-list-item id="strand-pulldown-button" value="strand-pulldown-button.html">strand-pulldown-button</strand-list-item>
				<strand-list-item id="strand-radio" value="strand-radio.html">strand-radio</strand-list-item>
				<strand-list-item id="strand-repeater" value="strand-repeater.html">strand-repeater</strand-list-item>
				<strand-list-item id="strand-scroll-panel" value="strand-scroll-panel.html">strand-scroll-panel</strand-list-item>
				<strand-list-item id="strand-spinner" value="strand-spinner.html">strand-spinner</strand-list-item>
				<strand-list-item id="strand-sync" value="strand-sync.html">strand-sync</strand-list-item>
				<strand-list-item id="strand-tab" value="strand-tab.html">strand-tab</strand-list-item>
				<strand-list-item id="strand-tabs" value="strand-tabs.html">strand-tabs</strand-list-item>
				<strand-list-item id="strand-textarea" value="strand-textarea.html">strand-textarea</strand-list-item>
				<strand-list-item id="strand-timepicker" value="strand-timepicker.html">strand-timepicker</strand-list-item>
				<strand-list-item id="strand-tooltip" value="strand-tooltip.html">strand-tooltip</strand-list-item>
			</strand-docs-nav>
			<div class="docs-logo">
				<a class="strand-logo">
					<img src="images/strand-logo.svg" />
				</a>
				<p class="mini-subhead version">v4.1.0</p>
			</div>			<footer class="layout-footer">
				<div class="docs-footer">
					<div class="footer-logo-box">
						<div class="powered-by">
							<p class="mini-subhead">Powered By</p>
							<a href="https://developer.mediamath.com/" target="_blank" class="powered-logo"></a>
						</div>
						<div class="mediamath">
							<a href="http://mediamath.com/" target="_blank" class="mediamath-logo"></a>
						</div>
					</div>
					<p class="license">&copy;2015 Strand Authors. Code licensed under the <a href="LICENSE.txt" target="_blank">BSD License</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.</p>
				</div>
			</footer>			<article class="layout-article">
				<div class="docs-content article">
					<h1 id="working-with-strand-repeater">Working with strand-repeater</h1>
<h2 id="overview">Overview</h2>
<p><code>strand-repeater</code> allows the duplication of a set of fields contained within a template tag.</p>
<p><code>strand-repeater-row</code> has three bindable properties (like <code>strand-grid-item</code>):</p>
<ul>
<li><code>model</code>, a reference to javascript object with the data filling the row</li>
<li><code>scope</code>, a reference to the <code>strand-repeater</code> the row is contained in</li>
<li><code>index</code>, the index of the row&#39;s model within the repeater&#39;s <code>data</code></li>
</ul>
<p>So if you wanted to take a list of <em>n</em> addresses, you could set up:</p>
<pre><code class="lang-html">&lt;strand-repeater id=&quot;myRepeater&quot;&gt;
    &lt;template preserve-content&gt;
        &lt;strand-repeater-row model=&quot;{{model}}&quot; scope=&quot;{{scope}}&quot; index=&quot;{{index}}&quot;&gt;
            &lt;span&gt;{{index}}&lt;/span&gt;
            &lt;strand-input name=&quot;first_name&quot; placeholder=&quot;First Name&quot; value=&quot;{{model.first_name}}&quot;&gt;&lt;/strand-input&gt;
            &lt;strand-input name=&quot;last_name&quot; placeholder=&quot;Last Name&quot; value=&quot;{{model.last_name}}&quot;&gt;&lt;/strand-input&gt;
            &lt;strand-input name=&quot;address&quot; placeholder=&quot;Address&quot; value=&quot;{{model.address}}&quot;&gt;&lt;/strand-input&gt;
            &lt;strand-input name=&quot;city&quot; placeholder=&quot;City&quot; value=&quot;{{model.city}}&quot;&gt;&lt;/strand-input&gt;
            &lt;strand-dropdown name=&quot;state&quot; placeholder=&quot;State/Province&quot; value=&quot;{{model.state}}&quot;&gt;
                ...
            &lt;/strand-dropdown&gt;
            &lt;strand-input name=&quot;zip_code&quot; placeholder=&quot;ZIP/Postal Code&quot; value=&quot;{{model.zip_code}}&quot;&gt;&lt;/strand-input&gt;
        &lt;/strand-repeater-row&gt;
    &lt;/template&gt;
&lt;/strand-repeater&gt;
</code></pre>
<p>Binding the values of the form input to the model means that the javascript object will update when the value of the form fields update.</p>
<p>Binding works just like in a custom <code>strand-grid-item</code>, so, for example, to disable a specific form field based on the value of a property in the model, you could write something like this:</p>
<pre><code class="lang-html">&lt;strand-repeater&gt;
    &lt;template preserve-content&gt;
        &lt;strand-repeater-row model=&quot;{{model}}&quot; scope=&quot;{{scope}}&quot;&gt;
            &lt;strand-input name=&quot;name&quot; placeholder=&quot;Name&quot; value=&quot;{{model.name}}&quot; disabled$=&quot;{{model.locked}}&quot;&gt;&lt;/strand-input&gt;
        &lt;/strand-repeater-row&gt;
    &lt;/template&gt;
&lt;/strand-repeater&gt;
</code></pre>
<p>This will create an attribute binding to the <code>disabled</code> property of the input, so the user will not be able to modify the inputs of rows that are &quot;locked&quot;.</p>
<h2 id="reading-data-from-strand-repeater-">Reading data from <code>strand-repeater</code></h2>
<p><code>strand-repeater</code> has four public arrays that are exactly what they say on the tin:</p>
<ul>
<li><code>data</code> contains all of the data in the repeater</li>
<li><code>added</code> contains only the models that have been added by the user</li>
<li><code>modified</code> contains only the pre-populated models that have been modified</li>
<li><code>deleted</code> contains the models that have been removed by the user (and are therefore no longer in <code>data</code>)
You will find these arrays on any element that implements the <code>Collection</code> behavior such as <code>strand-collection</code>. Each model also gets a <code>cId</code> property (distinct from the index) which will be useful to identify models <a href="#validation">when validating</a>.</li>
</ul>
<p><code>strand-repeater</code> also has a <code>value</code> attribute that is just a getter/setter pair for <code>data</code>, allowing you to drop it into a larger <code>strand-form</code>.</p>
<h2 id="pre-populating-data">Pre-populating data</h2>
<p>Data can be pre-populated into the repeater by setting <code>data</code>. This is useful in views where the user wishes to edit some pre-existing collection of data.</p>
<pre><code class="lang-javascript">var myRepeater = document.getElementById(&#39;myRepeater&#39;);
myRepeater.data = [
    {
        first_name: &quot;Jerry&quot;,
        last_name: &quot;Seinfeld&quot;,
        address: &quot;129 W. 81st Street&quot;,
        city: &quot;New York&quot;,
        state: &quot;NY&quot;,
        zip_code: &quot;10024&quot;
    },
    {
        first_name: &quot;George&quot;,
        last_name: &quot;Costanza&quot;,
        address: &quot;1344 Queens Blvd.&quot;,
        city: &quot;Queens&quot;,
        state: &quot;NY&quot;,
        zip_code: &quot;11374&quot;
    }
];
</code></pre>
<p>By default <code>data</code> will contain one array with an empty object, giving you a single row with all fields blank.</p>
<h2 id="validation">Validation</h2>
<p>You can assign a function to <code>strand-repeater</code>&#39;s <code>validation</code> property, which the element will use to validate user input, set error state, and display error messages. When you call <code>validate()</code> on the repeater, that subsequently calls <code>validation</code> with four parameters, which are the <code>data</code>, <code>added</code>, <code>modified</code>, and <code>deleted</code> arrays (in that order) and should return an array of invalid models with error messages. There are two requirements for this to work properly:</p>
<ul>
<li>The <code>name</code> attribute of each form field you want to validate must match the name of the property its <code>value</code> is bound to. So in our example above, we have <code>&lt;strand-input name=&quot;first_name&quot; value=&quot;{{model.first_name}}&quot;&gt;</code>.</li>
<li>The models that <code>validation</code> returns must include the <code>cId</code> (which you can just pass through)</li>
</ul>
<p>The easiest way to do this is with ES5 array <code>map</code> and <code>filter</code>:</p>
<pre><code class="lang-javascript">function validateAddr(address) {
    if(!address) return &#39;Address required!&#39;;
    var tmp = address.split(&#39; &#39;);
    if(Number.isNaN(parseInt(tmp[0]))) return &#39;Street number required!&#39;;
}

function validateZip(zip) {
    if(!zip) return &#39;ZIP required!&#39;;
    var zip5 = zip.length === 5 &amp;&amp; !Number.isNaN(parseInt(zip));
    var zip9 = zip.length === 10 &amp;&amp; zip.split(&#39;-&#39;).reduce(function(acc, current, index) {
        return !Number.isNaN(parseInt(current)) &amp;&amp; acc;
    });
    return (zip5 || zip9) ? null : &#39;ZIP is invalid!&#39;
}

myRepeater.validation = function(data, added, modified, removed) {
    return data.map(function(model) {
        return {
            cId: model.cId,
            first_name: model.first_name ? null : &#39;First name required!&#39;,
            last_name: model.last_name ? null : &#39;Last name required!&#39;,
            address: validateAddr(model.address),
            city: model.city ? null : &#39;City required!&#39;,
            state: model.state ? null : &#39;State required!&#39;,
            zip_code: validateZip(model.zip)
        }
    });
};
</code></pre>
<p>The repeater considers the field invalid if an error message is present. It will set the error state on the associated element if possible and add an error message below the form element, which will persist until the next call of <code>validate()</code>.</p>

				</div>
				<div class="layout-push"></div>
			</article>
		</strand-docs-shell>
		<script>
			var name = "",
				articlesNav,
				componentsNav,
				docsShell,
				navItems; 

			window.addEventListener('WebComponentsReady', function() {
				initDoc();
			});

			function initDoc() {
				articlesNav 	= Polymer.dom(document).querySelector("#articlesNav");
				componentsNav 	= Polymer.dom(document).querySelector("#componentsNav");
				docsShell 		= Polymer.dom(document).querySelector("#docsShell");
				navItems 		= Polymer.dom(document).querySelectorAll("strand-list-item");

				// default expanded:
				articlesNav.expanded = true;
				componentsNav.expanded = false;

				hljs.initHighlighting();

				Array.prototype.slice.call(navItems).forEach(function(item) {
					if (item.id === name) {
						item.selected = true;
						return;
					}
				});

				docsShell.addEventListener("docs-nav-selected", navigateToPage);
			}

			function navigateToPage(e) {
				window.location = e.detail.value;
			}
		</script>
	</body>
</html>