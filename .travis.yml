language: node_js
sudo: required
dist: trusty
node_js: stable
addons:
  firefox: '46.0'
  apt:
    sources:
    - google-chrome
    - ubuntu-toolchain-r-test
    packages:
    - google-chrome-stable
    - g++-4.8
before_install:
- source /opt/jdk_switcher/jdk_switcher.sh
- jdk_switcher use oraclejdk8
before_script:
- gem install percy-cli
- npm install -g bower web-component-tester
- npm install
- bower install
- gulp clean
- gulp build
script: xvfb-run wct
after_success:
- gulp docs
- percy snapshot build_docs/
env:
  global:
  - CXX=g++-4.8
  - secure: TKTQZjW9+6NpSUt/hI8fj2YwzGDayDpuvc2aM9PvKjBRr6LMNBqhzD2RuzWUMeLR/B2Wh6FCp1BPJY2tACC5DzB2HC6lQizoS6QgMskjDfghiHkLyCgj7klZNMWbbvFpuLDT2PkutqR+Hm/Y0UJA29DgKC309p1BxIHqAVnOM9k=
  - secure: VTaLvhoGfFOAwfdHmoZqVoZNIexEb/Na4zOBDdTdkbtaw2m5E7Ff2BOsM0bEwdkuYpTGQZ56a5HphMFnK7mk7Yi/0TVSqvox0p960BJYoF+MxzOY/LL8G0iZQlgP46w3tquM2/QtQVkDEVWbUI5S/eJhQu30DjjSaB9Ug7MEP7c=
