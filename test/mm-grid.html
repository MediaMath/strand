<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<script src="../bower_components/webcomponentsjs/webcomponents.js"></script>
	<script src="../bower_components/web-component-tester/browser.js"></script>
	<script>
		var should = chai.should();
	</script>
	<link rel="import" href="../build/strand.html">
</head>
<body>
	<script>
		describe("mm-grid", function() {

			it("should have a default template", function() {
				var grid = document.querySelector("#testgrid");
				should.exist(grid.itemTemplate);
			});

			it("should have a custom template", function() {
				var grid = document.querySelector("#testgrid2");
				var customTemplate = document.querySelector("#customTemplate");
				grid.itemTemplate.should.equal(customTemplate);
			});
			
			it("should have columns", function() {
				var grid = document.querySelector("#testgrid");
				should.exist(grid.columns);
				grid.columns.length.should.equal(2);
			});

			it("should have columns with initial width", function() {
				var grid = document.querySelector("#testgrid");
				grid.columns.forEach(function(column){
					column.width.should.equal("50%");
				});
			});

			it("should render items when data is set", function(done) {
				var grid = document.querySelector("#testgrid");
				var data = [];
				for(var i=0; i < 10; i++){
					data.push({id: i, foo: "foo", bar: "bar"});
				}
				grid.data = data;
				grid.async(function(){
					var items = grid.shadowRoot.querySelectorAll("mm-grid-item");
					items.length.should.be.greaterThan(0);
					done();
				});
			});

			it("should select all items", function() {
				var grid = document.querySelector("#testgrid");
				grid.selectAll(null, null, {checked: true});
				grid.data.every(function(item){ return item.selected === true; }).should.equal(true);
			});

		});
	</script>
	<mm-grid id="testgrid" selectable>
		<mm-grid-column field="foo">Foo</mm-grid-column>
		<mm-grid-column field="bar">Bar</mm-grid-column>
	</mm-grid>
	<mm-grid id="testgrid2" itemTemplate="customTemplate">
		<mm-grid-column field="foo">Foo</mm-grid-column>
		<mm-grid-column field="bar">Bar</mm-grid-column>
		<template id="customTemplate">
			<mm-grid-item></mm-grid-item>
		</template>
	</mm-grid>
</body>
</html>