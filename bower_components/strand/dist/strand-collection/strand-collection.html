<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"></head><body><div hidden by-vulcanize=""><link rel="import" href="../../bower_components/polymer/polymer.html"><script>(function(a){function b(r,s){return Object.prototype.toString.call(r).toLowerCase()==="[object "+s.toLowerCase()+"]"}function c(r){return void 0!==r&&null!==r}function d(r){if(r)return Array.prototype.slice.call(r)}function f(r,s){return!s||-1===s.indexOf(r.name)}function g(r,s,u){var v={},w=d(r.attributes);return w&&(w.forEach(function(x){if(f(x,s))try{v[x.name]=JSON.parse(x.value)}catch(y){v[x.name]=""===x.value||x.value}}),r.innerHTML&&u&&(v.inner=r.innerHTML.trim())),v}function h(r,s){if(0===r.length)return{};var u,w,v=s||{};for(u=r.length-1;0<=u;u--)w=r[u],v[w.name]=w.value;return v}function k(r){var s=[];for(var u in r)s.push({name:u,value:r[u]});return s}function l(r){return r.value||r.inner}function m(r,s,u){return u=u||{},Object.keys(r).forEach(function(v){-1!==s.indexOf(v)&&(u[v]=r[v]),b(r[v],"object")&&m(r[v],s,u)}),u}function q(r){var s={};return Object.keys(r).forEach(function(u){s[u]=r[u]}),s}a.DataUtils={clone:d,copy:function(){var s=d(arguments),u=1<s.length?s.shift():{};return s.reduce(function(v,w){if(b(w,"object"))for(var x in w)v[x]=w[x];return v},u)},isType:b,objectifyAttributes:g,isDef:c,param:function(r,s){return{name:r,value:s}},packParams:h,unpackParams:k,// uniqueMergeParams: function() {
// 	return _uniqueMerge.apply(this, arguments);
// },
uniqueMergeParams:function(){var s={},u=d(arguments);return u.forEach(function(v){0<v.length&&h(v,s)}),k(s)},objectifyDistributedNodes:function(r){return r=d(r).filter(function(u){return u.nodeType===Node.ELEMENT_NODE}),r.reduce(function s(u,v){var w=v.nodeName.toLowerCase();return void 0===u[w]&&(u[w]=[]),0<v.children.length?u[w]=d(v.children).reduce(s,{}):u[w].push(g(v,null,!0)),u},{})},nodeInnerValue:l,nodeToParam:function(s){return{name:s.name,value:l(s)}},nodeCheckIf:function(s,u){if(s.conditional){c(s.if)&&JSON.parse(s.if);var v=c(s.if)&&JSON.parse(s.if);return v?u(s):null}return u(s)},mergeParamLists:function(){var r,s,u,v={},w=[],x=[],y=d(arguments);for(r=y.length-1;0<=r;r--)if(x=y[r],x&&x.length)for(s=x.length-1;0<=s;s--)u=x[s],u&&!v[u.name||u]&&(w.push(u),v[u.name||u]=!0);return w.reverse()},getPathValue:function(s,u){if(!u)return null;var v=s;return"string"==typeof s&&(v=s.split(".")),v.reduce(function(w,x){return w&&"object"==typeof w&&x in w?w[x]:null},u)},setPathValue:function(s,u,v,w){if(u){var x=s;"string"==typeof s&&(x=s.split("."));var y=x.slice(-1)[0];x.reduce(function(z,A){return A===y?z[A]=v:w&&!z[A]&&(z[A]={}),z[A]},u)}},pluck:function(s,u){return b(s,"Array")?s.map(function(v){return m(v,u)}):m(s,u)},cloneObj:q,mergeObj:function(s,u){var v=q(s);return Object.keys(u).forEach(function(w){v[w]=u[w]}),v},indexByProp:function(s,u){var v={};for(var w=s.length-1;0<=w;w--){var x=s[w][u];v[x]=s[w]}return v},indexAllByProp:function(s,u){var v={};for(var w=s.length-1;0<=w;w--){var x=s[w][u];v[x]||(v[x]=[]),v[x].push(s[w])}return v}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){var b=StrandLib.DataUtils;a.BehaviorUtils={extend:function(c){return Array.prototype.slice.call(arguments,1).forEach(function(d){var e,f;if(d)for(f in d)e=Object.getOwnPropertyDescriptor(d,f),Object.defineProperty(c,f,e)}),c},callProtochain:function(c,d,e){var f=d.behaviors;for(var g=0;g<f.length;g++)f[g][c]&&f[g][c].apply(d,e)},findSuper:function(c,d){if(b.isType(c,"array"))return c.reduce(function(e,f){if(b.isType(f,"array"))return a.BehaviorUtils.findSuper(f,d);var g=f[d];return g&&g instanceof Function?g:e},Function());return c&&c[d]?c[d]:void console.warn("This doesnt look like a behavior array")}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(b){function c(f,g){g.cId=f._cidIndex++}var e=StrandLib.DataUtils;StrandLib.BehaviorUtils,b.Collection={properties:{_cidIndex:{type:Number,value:0},added:{type:Array,value:function(){return[]},notify:!0},removed:{type:Array,value:function(){return[]},notify:!0},modified:{type:Array,value:function(){return[]},notify:!0}},observers:['_dataArrayChanged(data.splices)','_deepChanged(data.*)'],add:function(f,g,h){this._silent=g,f.cId&&-1!==f.cId||c(this,f);var j=this.data.filter(function(k){return k.cId&&f.cId?k.cId===f.cId:k.mId&&f.mId&&k.mId===f.mId});if(0===j.length||h)// if (!silent) this.fire("changed", {instance:this, data:this.data});
return this.push('data',f),f;throw new Error('Model Conflict - matching id\'s, use force flag to add manually')},getDataAt:function(f){var g=this.getModelAt(f);return e.getPathValue('data',g)||g},getModelAt:function(f){return this.data[f]},getIndexOf:function(f){return this.data.indexOf(f)},getIndexOfCid:function(f,g){return g=g||'data',this[g].reduce(function(h,j,k){return j.cId===f?k:h},-1)},remove:function(f){e.isType(f,'object')?this.splice('data',this.data.indexOf(f),1):this.splice('data',f,1)},empty:function(f){this._silent=f,this._cidIndex=0;var g=this.data.slice();return this.set('data',[]),g},each:function(f){this.data&&this.data.length&&this.data.forEach(f,this)},where:function(f,g){if(this.data&&this.data.length){var h=Object.keys(f);return this.data.filter(function(k){var l=k.data||k;return h.reduce(function(n,p){return n&&(g?l[p]===f[p]:l.hasOwnProperty(p))},!0)})}},_dataArrayChanged:function(f){f&&f.indexSplices.forEach(function(g){g.removed.forEach(function(j){-1===this.getIndexOfCid(j.cId,'added')&&this.push('removed',j),this._cleanHelperArrays('added',j),this._cleanHelperArrays('modified',j)},this);for(var h=g.index;h<g.index+g.addedCount;h++)this.push('added',this.data[h]);//new so we dont need to worry about the helpers
},this)},_cleanHelperArrays:function(f,g){this[f];var h=this.getIndexOfCid(g.cId,f);-1!==h&&this.splice(f,h,1)},_resetHelperArrays:function(){this.set('added',[]),this.set('modified',[]),this.set('removed',[])},_deepChanged:function(f){if(f&&f.path){var g=f.path.split('.');if(1<g.length&&'#'===g[1].charAt(0)){var h=Polymer.Base.get('data.'+g[1],this);this.fire('added-changed'),this.fire('removed-changed'),this.fire('modified-changed'),h&&-1===this.getIndexOfCid(h.cId,'added')&&-1===this.getIndexOfCid(h.cId,'modified')&&(this.push('modified',h),this._cleanHelperArrays('added',h),this._cleanHelperArrays('removed',h))}else'data'===f.path&&this.data&&(this._resetHelperArrays(),this.data.forEach(function(j){j.cId||c(this,j)},this))}},get length(){return this.data.length},get count(){return this._count||this.length},toJSON:function(){this.data.toJSON()}}})(window.StrandTraits=window.StrandTraits||{});</script><script>/**
 * @author mrdoob / http://mrdoob.com/
 */var EventDispatcher=function(){};EventDispatcher.prototype={constructor:EventDispatcher,apply:function(a){a.addEventListener=EventDispatcher.prototype.addEventListener,a.hasEventListener=EventDispatcher.prototype.hasEventListener,a.removeEventListener=EventDispatcher.prototype.removeEventListener,a.dispatchEvent=EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){this._listeners===void 0&&(this._listeners={});var c=this._listeners;c[a]===void 0&&(c[a]=[]),-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(this._listeners===void 0)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners,d=c[a];if(void 0!==d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;var d=[],e=c.length;for(var f=0;f<e;f++)d[f]=c[f];for(var f=0;f<e;f++)d[f].call(this,a)}}}};</script><script>(function(a){function b(c,d){this.mode=d,this.key=c}a.DataUtils,b.prototype={save:function(c){this.value=c},load:function(){return this.value},hasKey:function(c){return null!==this.store.getItem(c||this.key)},clear:function(){delete this.store[this.key]},clearAll:function(){this.storage.clear()},destroy:function(){window.removeEventListener("storage",this.handleStorage),delete this.mode,delete this.key},set:function(c,d){var f=this.value||{};Polymer.Base.set(c,d,f),this.value=f},get:function(c){return Polymer.Base.get(c,this.value)},get value(){var c=this.store.getItem(this.key);if(null===c)return null;try{return JSON.parse(c)}catch(d){return c}return c},set value(c){this.store.setItem(this.key,JSON.stringify(c))},get store(){return"session"===this.mode?sessionStorage:localStorage}},a.Storage=b})(window.StrandLib=window.StrandLib||{});</script><script>!function(aa,ba){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ba():"function"==typeof define&&define.amd?define(ba):aa.ES6Promise=ba()}(this,function(){"use strict";function aa($a){return"function"==typeof $a||"object"==typeof $a&&null!==$a}function ba($a){return"function"==typeof $a}function ca(){return"undefined"==typeof Ja?da():function(){Ja(ea)}}function da(){var $a=setTimeout;return function(){return $a(ea,1)}}function ea(){for(var $a=0;$a<Ia;$a+=2){var _a=Ra[$a],ab=Ra[$a+1];_a(ab),Ra[$a]=void 0,Ra[$a+1]=void 0}Ia=0}function fa($a,_a){var ab=arguments,bb=this,cb=new this.constructor(ha);void 0===cb[Ta]&&Aa(cb);var db=bb._state;return db?!function(){var eb=ab[db-1];La(function(){return xa(db,cb,eb,bb._result)})}():ta(bb,cb,$a,_a),cb}function ga($a){var _a=this;if($a&&"object"==typeof $a&&$a.constructor===_a)return $a;var ab=new _a(ha);return pa(ab,$a),ab}function ha(){}function ia(){return new TypeError("You cannot resolve a promise with itself")}function ja(){return new TypeError("A promises callback cannot return that same promise.")}function ka($a){try{return $a.then}catch(_a){return Xa.error=_a,Xa}}function la($a,_a,ab,bb){try{$a.call(_a,ab,bb)}catch(cb){return cb}}function ma($a,_a,ab){La(function(bb){var cb=!1,db=la(ab,_a,function(eb){cb||(cb=!0,_a===eb?ra(bb,eb):pa(bb,eb))},function(eb){cb||(cb=!0,sa(bb,eb))},"Settle: "+(bb._label||" unknown promise"));!cb&&db&&(cb=!0,sa(bb,db))},$a)}function na($a,_a){_a._state===Va?ra($a,_a._result):_a._state===Wa?sa($a,_a._result):ta(_a,void 0,function(ab){return pa($a,ab)},function(ab){return sa($a,ab)})}function oa($a,_a,ab){_a.constructor===$a.constructor&&ab===fa&&_a.constructor.resolve===ga?na($a,_a):ab===Xa?sa($a,Xa.error):void 0===ab?ra($a,_a):ba(ab)?ma($a,_a,ab):ra($a,_a)}function pa($a,_a){$a===_a?sa($a,ia()):aa(_a)?oa($a,_a,ka(_a)):ra($a,_a)}function qa($a){$a._onerror&&$a._onerror($a._result),ua($a)}function ra($a,_a){$a._state===Ua&&($a._result=_a,$a._state=Va,0!==$a._subscribers.length&&La(ua,$a))}function sa($a,_a){$a._state===Ua&&($a._state=Wa,$a._result=_a,La(qa,$a))}function ta($a,_a,ab,bb){var cb=$a._subscribers,db=cb.length;$a._onerror=null,cb[db]=_a,cb[db+Va]=ab,cb[db+Wa]=bb,0===db&&$a._state&&La(ua,$a)}function ua($a){var _a=$a._subscribers,ab=$a._state;if(0!==_a.length){for(var bb=void 0,cb=void 0,db=$a._result,eb=0;eb<_a.length;eb+=3)bb=_a[eb],cb=_a[eb+ab],bb?xa(ab,bb,cb,db):cb(db);$a._subscribers.length=0}}function va(){this.error=null}function wa($a,_a){try{return $a(_a)}catch(ab){return Ya.error=ab,Ya}}function xa($a,_a,ab,bb){var cb=ba(ab),db,eb,fb,gb;if(!cb)db=bb,fb=!0;else if(db=wa(ab,bb),db===Ya?(gb=!0,eb=db.error,db=null):fb=!0,_a===db)return void sa(_a,ja());_a._state!==Ua||(cb&&fb?pa(_a,db):gb?sa(_a,eb):$a===Va?ra(_a,db):$a===Wa&&sa(_a,db))}function ya($a,_a){try{_a(function(ab){pa($a,ab)},function(ab){sa($a,ab)})}catch(ab){sa($a,ab)}}function za(){return Za++}function Aa($a){$a[Ta]=Za++,$a._state=void 0,$a._result=void 0,$a._subscribers=[]}function Ba($a,_a){this._instanceConstructor=$a,this.promise=new $a(ha),this.promise[Ta]||Aa(this.promise),Ha(_a)?(this._input=_a,this.length=_a.length,this._remaining=_a.length,this._result=Array(this.length),0===this.length?ra(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&ra(this.promise,this._result))):sa(this.promise,Ca())}function Ca(){return new Error("Array Methods must be provided an Array")}function Da(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ea(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Fa($a){this[Ta]=za(),this._result=this._state=void 0,this._subscribers=[],ha!==$a&&("function"!=typeof $a&&Da(),this instanceof Fa?ya(this,$a):Ea())}var Ga;Ga=Array.isArray?Array.isArray:function($a){return"[object Array]"===Object.prototype.toString.call($a)};var Ha=Ga,Ia=0,Ja=void 0,Ka=void 0,La=function($a,_a){Ra[Ia]=$a,Ra[Ia+1]=_a,Ia+=2,2==Ia&&(Ka?Ka(ea):Sa())},Ma="undefined"==typeof window?void 0:window,Na=Ma||{},Oa=Na.MutationObserver||Na.WebKitMutationObserver,Pa="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Qa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Ra=Array(1e3),Sa;Sa=Pa?function(){return function(){return process.nextTick(ea)}}():Oa?function(){var _a=0,ab=new Oa(ea),bb=document.createTextNode("");return ab.observe(bb,{characterData:!0}),function(){bb.data=_a=++_a%2}}():Qa?function(){var _a=new MessageChannel;return _a.port1.onmessage=ea,function(){return _a.port2.postMessage(0)}}():void 0===Ma&&"function"==typeof require?function(){try{var _a=require,ab=_a("vertx");return Ja=ab.runOnLoop||ab.runOnContext,ca()}catch(bb){return da()}}():da();var Ta=Math.random().toString(36).substring(16),Ua,Va=1,Wa=2,Xa=new va,Ya=new va,Za=0;return Ba.prototype._enumerate=function(){for(var $a=this.length,_a=this._input,ab=0;this._state===Ua&&ab<$a;ab++)this._eachEntry(_a[ab],ab)},Ba.prototype._eachEntry=function($a,_a){var ab=this._instanceConstructor,bb=ab.resolve;if(bb===ga){var cb=ka($a);if(cb===fa&&$a._state!==Ua)this._settledAt($a._state,_a,$a._result);else if("function"!=typeof cb)this._remaining--,this._result[_a]=$a;else if(ab===Fa){var db=new ab(ha);oa(db,$a,cb),this._willSettleAt(db,_a)}else this._willSettleAt(new ab(function(eb){return eb($a)}),_a)}else this._willSettleAt(bb($a),_a)},Ba.prototype._settledAt=function($a,_a,ab){var bb=this.promise;bb._state===Ua&&(this._remaining--,$a===Wa?sa(bb,ab):this._result[_a]=ab),0===this._remaining&&ra(bb,this._result)},Ba.prototype._willSettleAt=function($a,_a){var ab=this;ta($a,void 0,function(bb){return ab._settledAt(Va,_a,bb)},function(bb){return ab._settledAt(Wa,_a,bb)})},Fa.all=function(_a){return new Ba(this,_a).promise},Fa.race=function(_a){var ab=this;return new ab(Ha(_a)?function(bb,cb){for(var db=_a.length,eb=0;eb<db;eb++)ab.resolve(_a[eb]).then(bb,cb)}:function(bb,cb){return cb(new TypeError("You must pass an array to race."))})},Fa.resolve=ga,Fa.reject=function(_a){var ab=this,bb=new ab(ha);return sa(bb,_a),bb},Fa._setScheduler=function(_a){Ka=_a},Fa._setAsap=function(_a){La=_a},Fa._asap=La,Fa.prototype={constructor:Fa,then:fa,"catch":function($a){return this.then(null,$a)}},Fa.polyfill=function(){var _a;if("undefined"!=typeof global)_a=global;else if("undefined"!=typeof self)_a=self;else try{_a=Function("return this")()}catch(cb){throw new Error("polyfill failed because global object is unavailable in this environment")}var ab=_a.Promise;if(ab){var bb=null;try{bb=Object.prototype.toString.call(ab.resolve())}catch(cb){}if("[object Promise]"===bb&&!ab.cast)return}_a.Promise=Fa},Fa.Promise=Fa,Fa});</script><script>(function(a){function b(d){d=d||{},this.url=d.url,this.method=d.method||b.GET,this.body=d.body,this.responseType=d.responseType,this.contentType=d.contentType,this.headers=d.headers,this.withCredentials=d.withCredentials,this.timeout=d.timeout,this.username=d.username,this.password=d.password,this.progress=d.progress,this.requestMarshaller=d.requestMarshaller,this.responseMarshaller=d.responseMarshaller,this.options=d,this.defer={},this.xhr=new XMLHttpRequest,this.promise=new Promise(function(f,g){this.defer.resolve=f,this.defer.reject=g}.bind(this))}var c=StrandLib.DataUtils;b.GET="GET",b.POST="POST",b.PUT="PUT",b.DELETE="DELETE",b.prototype={exec:function(){return this.method&&this.url?(this.xhr.open(this.method,this.url,!0,this.username,this.password),this.xhr.responseType=this.responseType||"",this.xhr.timeout=this.timeout||1e4,this.xhr.withCredentials=this.withCredentials,this.xhr.onreadystatechange=this.readyStateChange.bind(this),this.xhr.addEventListener("abort",this.handleAbort.bind(this)),this.xhr.addEventListener("progress",this.handleProgress.bind(this)),this.xhr.addEventListener("timeout",this.handleTimeout.bind(this)),this.contentType&&this.xhr.setRequestHeader("content-type",this.contentType),this.headers&&this.headers.forEach(function(d){this.xhr.setRequestHeader(d.name,d.value)}.bind(this)),this.fire("preflight",{instance:this}),this.xhr.send(this.body),this.promise):(this.defer.reject({error:"url and method are required!!",instance:this,response:null}),this.promise)},readyStateChange:function(){var d={};4===this.xhr.readyState&&(this.fire("result",{instance:this}),this.response=this.responseHandler[this.xhr.responseType||"json"].call(this),!this.xhr.status||200<=this.xhr.status&&300>this.xhr.status?(d={response:this.response,instance:this},this.promise&&(this.defer.resolve(d),this.fire("response",d))):(d={error:this.xhr.status,instance:this,response:this.response},this.promise&&(this.defer.reject(d),this.fire("error",d))))},handleAbort:function(){if(this.promise){var d={error:"aborted",instance:this,response:null};this.defer.reject(d),this.fire("preflight",d)}},handleProgress:function(d){var f=this._getProgressDetail(d);this.progress&&this.progress(f),this.fire("progress",f)},handleTimeout:function(){if(this.promise){var d={error:"timeout",instance:this,response:null};this.defer.reject(d)}},_getProgressDetail:function(d){var f=c.isDef(d.loaded)?d.loaded:d.position,g=c.isDef(d.total)?d.total:d.totalSize;return{percent:Math.round(100*(f/g)),current:f,total:g}},responseHandler:{xml:function(){return this.xhr.responseXML},text:function(){return this.xhr.responseText},json:function(){var d=this.xhr.responseText;try{return JSON.parse(d)}catch(g){var f={error:g.message,instance:this,response:d};return this.fire("error",f),this.defer.reject(f),d}},document:function(){return this.xhr.response},blob:function(){return this.xhr.response},arrayBuffer:function(){return this.xhr.response}},abort:function(){this.xhr&&(this.xhr.abort(),this.fire("abort",{instance:this}))},fire:function(d,f){this._eventPrefix&&(d=this._eventPrefix+d);var g=new CustomEvent(d,{detail:f});this.dispatchEvent(g)},get status(){return this.xhr&&this.xhr.status},get state(){return this.xhr&&this.xhr.readyState}},EventDispatcher.prototype.apply(b.prototype),a.Request=b})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){function b(c,d,e){if(!c)throw new Error("request array is required");this.work=c.slice(),this.results=[],this.failures=[],this.flight=[],this.concurrency=d,this.processHook=e,this.defer={},this.promise=new Promise(function(f,g){this.defer.resolve=f,this.defer.reject=g}.bind(this))}b.prototype={next:function(c){c&&(this.results=this.results.concat(c));var d=this.work.splice(0,this.concurrency).map(function(f){return this.flight.push(f),this.processHook&&this.processHook(f),f.exec()},this);if(d&&0<d.length){var e=Promise.all(d);e.then(this.next.bind(this),this.fail.bind(this))}else this.defer.resolve(this.results)},fail:function(c){this.defer.reject(c),this.failures.push(c)},exec:function(){this.next()},abort:function(){this.work=[],this.flight.forEach(function(c){c.abort()}),this.defer.reject(new Error("Aborted"))}},a.RequestQueue=b})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){function b(l,m){return encodeURIComponent(l)+"="+encodeURIComponent(m)}function c(l,m,n,o){o=o||b;var p,s=[];for(var t in m=m||"",n=n||0,l)p=l[t],name=0===n?t:"["+t+"]","object"==typeof p?s=s.concat(c(p,m+name,n+1)):s.push(o(m+name,p));return s}function d(l){this._eventPrefix="ajax-",this.recent={},this.requests=[],this.options=f.copy({},{contentType:"application/x-www-form-urlencoded",method:h.GET,withCredentials:!1,timeout:1e4},l)}var f=StrandLib.DataUtils,g=StrandLib.BehaviorUtils,h=StrandLib.Request,j=StrandLib.RequestQueue;d.GET=h.GET,d.POST=h.POST,d.PUT=h.PUT,d.DELETE=h.DELETE,d.prototype={queue:function(l,m,n){var o=this._requestFactory(l,m);return this._getQueue(n,!0).push(o),o.promise},execQueue:function(l){var m=this._getQueue(l),n=new j(m,this.options.concurrency,function(o){this.current=o}.bind(this));return n.exec(),m.running=n,n.promise},exec:function(l,m){var n=this._requestFactory(l,m);return this.requests.push(n),this.current=n,n.exec(),n.promise},_getQueue:function(l,m){if(l){if(this[l])return this[l];if(m)return this[l]=[],this[l]}else return this.requests},_requestFactory:function(l,m){var n=f.copy;m=n({},this.options,m);var o=this.serializeUrl(m.url,m.urlParams);return o=this.serializeQuery(o,m.query),l=this.setRequestData(m.method,m.contentType,l,m.body),new h(n(m,{url:o,body:l}))},abort:function(){this.current&&(this.current.abort(),this.fire("abort",{instance:this},{prefix:!0}))},abortQueue:function(l){_getQueue(l).running.abort(),this.fire("abort-queue",{instance:this},{prefix:!0})},addHeader:function(l,m){this.options.headers=this.options.headers||[],this.options.headers.push({name:l,value:m})},addParam:function(l,m){this.options.query=this.query||[],this.options.query.push({name:l,value:m})},addUrlParam:function(l){this.options.urlParams=this.urlParams||[],this.options.urlParams.push(l)},setRequestData:function(l,m,n,o){var p,s;if(n){if("string"==typeof n)return n;p=f.copy({},o,n)}else p=o;//ignores for GET requests
if(l.match(/(POST|PUT|DELETE)/i))if("application/json"===m)s=JSON.stringify(p);else if("multipart/form-data"!==m)s=this.__serialize(p).join("&");else if(p instanceof FormData)s=p;else{var t=new FormData;this.__serialize(p,t.append.bind(t)),s=t}return s},serializeUrl:function(l,m){return l=l||"",m&&0<m.length&&("/"!==l.slice(-1)&&(l+="/"),l+=m.join("/")),l},serializeQuery:function(l,m){if(m&&m.length){if(-1!==l.indexOf("?")){var n=l.slice(-1);"&"!==n&&"?"!==n&&(l+="&")}else l+="?";l+=this.__serialize(m).join("&")}return l},__serialize:function(l,m){m=m||b;var n,o,p=[];if("string"==typeof l)try{l=JSON.parse(l)}catch(s){this.fire("error",{error:s,instance:this},{prefix:!0})}if(f.isType(l,"array"))for(n=l.length-1;0<=n;n--)o=l[n],null!==o.name&&null!==o.value&&p.push(m(o.name,o.value));else p=c(l,null,null,m);return p},fire:function(l,m,n){if(this._eventPrefix&&f.getPathValue("prefix",n)&&(l=this._eventPrefix+l),this.is)Polymer.Base.fire.call(this,l,m,n);else{//JS Object
var o=new CustomEvent(l,{detail:m});this.dispatchEvent(o)}},get status(){return this.current&&this.current.xhr.status},get state(){return this.current&&this.current.state},get xhr(){return this.current&&this.current.xhr}};var k=g.extend({},d.prototype,{properties:{url:{type:String,notify:!0},response:{type:Object,notify:!0}},ready:function(){d.apply(this)}});d.getBehavior=function(){return k},EventDispatcher.prototype.apply(d.prototype),a.Ajax=d})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){var b=StrandLib.DataUtils;a.AjaxPlugin=function(c){this.queue=[],c&&(this.queue=c.map(function(d){return"function"==typeof d?new d:d}))},a.AjaxPlugin.prototype={register:function(c,d,e){var f="function"==typeof d?new d:d;e&&(f.config=b.copy(f.config,e)),c&&(f.name=c),this.queue.push(f)},processRequest:function(c){return this.process("requestHandler",c)},processResponse:function(c){return this.process("responseHandler",c)},process:function(c,d){return d=d||{},config=this.config,this.queue.reduce(function(e,f){var g;return f[c]&&(g=f[c](e)),f.reset&&f.reset(),g||e},d)},getConfig:function(c){return b.getPathValue("config",this.getInstance(c))},getInstance:function(c){if(0<this.queue.length){var d=this.queue.filter(function(e){return e.name===c});return d.length?d[0]:null}return null}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){var b=StrandLib.DataUtils,c=StrandLib.Storage;a.AjaxCSRFPlugin=function(d,e){this.config=b.copy({useCache:!0,header:"X-CSRF-Token",enabled:!0,token:""},d),this.config.useCache&&(this.storage=new c("csrf"),this.config.token=this.config.token||this.storage.value),this.name=e},a.AjaxCSRFPlugin.prototype={requestHandler:function(d){var e=b.getPathValue("headers",d);if(this.config.enabled&&e&&this.config.token){var f=b.param(this.config.header,this.config.token);e.push(f)}return d},responseHandler:function(d){var e=b.getPathValue("instance.xhr",d),f=e&&-1!==e.getAllResponseHeaders().indexOf(this.config.header);if(f&&this.config.enabled){var g=e.getResponseHeader(this.config.header);this.config.token=g,this.config.useCache&&(this.storage.value=g)}return d}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){var b=StrandLib.DataUtils;a.AjaxBusterPlugin=function(c,d){this.config=b.copy({name:"nocache",enabled:!0},c),this.name=d},a.AjaxBusterPlugin.prototype={requestHandler:function(c){var d=b.getPathValue("query",c);this.config.enabled&&d&&d.push(b.param(this.config.name,Date.now()))}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){var b=StrandLib.DataUtils;a.AjaxAPIPlugin=function(c,d){this.config=b.copy({defaultRequest:"noop",defaultResponse:"noop",marshaller:{noop:function(e){return e}},enabled:!0},c),this.name=d},a.AjaxAPIPlugin.prototype={requestHandler:function(c){if(this.config.enabled&&c){var d=this.config.marshaller[c.requestMarshaller||this.config.defaultRequest],e=d(this.config.data||c.body);b.setPathValue("body",c,e)}return c},responseHandler:function(c){if(this.config.enabled&&c){var d=b.getPathValue("instance.responseMarshaller",c),e=this.config.marshaller[d||this.config.defaultResponse];b.setPathValue("marshalled",c,e(b.getPathValue("response",c),c))}return c}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){function b(d){return c.copy({query:[],urlParams:[],headers:[]},d)}var c=StrandLib.DataUtils;a.AjaxPagePlugin=function(d,e){this.config=c.copy({enabled:!1,page:0,pageSize:10,pageName:"page_offset",sizeName:"page_limit",url:!1,query:!0,body:!1,pageType:"offset",countPath:"",stampPage:!0},d),this.name=e},a.AjaxPagePlugin.prototype={nextPage:function(){this.page++},prevPage:function(){0<this.page&&this.page--},requestHandler:function(d){var e=c.getPathValue("page",d),f=c.copy({},this.config,e);if(f.enabled){d=b(d);var g="offset"===f.pageType?f.page*f.pageSize:f.page;f.stampPage&&(d._page=f.page,d._pageSize=f.pageSize),f.url&&(f.pageName&&(d.urlParams.push(f.pageName),d.urlParams.push(g)),f.sizeName&&(d.urlParams.push(f.sizeName),d.urlParams.push(f.pageSize))),f.query&&(f.pageName&&d.query.push(c.param(f.pageName,g)),f.sizeName&&d.query.push(c.param(f.sizeName,f.pageSize))),f.body&&c.isType(d.body,"object")&&(f.pageName&&(d.body[f.pageName]=g),f.sizeName&&(d.body[f.sizeName]=f.pageSize))}return d},responseHandler:function(d){if(this.config.enabled&&this.config.countPath&&(d.count=c.getPathValue("response."+this.config.countPath,d)),this.config.enabled&&this.config.stampPage){var e=c.getPathValue("instance.options._page",d),f=c.getPathValue("instance.options._pageSize",d),g=c.getPathValue("marshalled.meta",d);g?(g._page=e,g._pageSize=f):(d._page=e,d._pageSize=f)}return d}}})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){function b(s){return s=s||{},{query:s.queryparam||[],urlParams:s.urlparam||[],headers:s.header||[]}}function c(){var s=g.clone(arguments),t=b();return s.reduce(function(u,v){if(g.isType(v,"object"))for(var w in v)"query"===w||"headers"===w||"urlParams"===w?0<v[w].length&&(u[w]=v[w]):u[w]=v[w];return u},t)}function d(){return[new l({},"csrf"),new m({},"buster"),new o({},"page"),new n({},"api")]}function f(s){return s&&"strand-collection"===s.is?[]:{}}var g=StrandLib.DataUtils,h=StrandLib.BehaviorUtils,j=StrandLib.Storage,k=StrandLib.AjaxPlugin,l=StrandLib.AjaxCSRFPlugin,m=StrandLib.AjaxBusterPlugin,n=StrandLib.AjaxAPIPlugin,o=StrandLib.AjaxPagePlugin,p=StrandLib.Ajax,q=new j("globals","localStorage");null===q.value&&(q.value={}),a.Sync=function(s,t,u,v,w,x){this._eventPrefix="data-",this.isLoading=!1,this.endpoint=this.endpoint||s||"/",this.options=g.copy({contentType:"application/x-www-form-urlencoded",timeout:1e4,withCredentials:!1,concurrency:4,resultOnError:!1},this.options,t),this.set?this.set("data",this.data||u||f(this)):this.data=this.data||u||f(this),this.domHook=this.domHook||v,(this.saveResponse===void 0||null===this.saveResponse&&w)&&(this.saveResponse="boolean"!=typeof w||w),this._ajax=new p,this._plugin=this._plugin||new k(this.plugins||x||d())},a.Sync.prototype={get:function(s,t){return this.sync(p.GET,s,t)},post:function(s,t){return this.sync(p.POST,s,t)},put:function(s,t){return this.sync(p.PUT,s,t)},delete:function(s,t){return this.sync(p.DELETE,s,t)},sync:function(s,t,u){s=s||p.GET;var v,w;return this.domHook&&(v=this.domHook(s,this,u)),u=c({method:s,url:this.endpoint,body:t||this.data},this.options,v,u),u=this._plugin.processRequest(u),"multi"===u.mode&&g.isType(t,"array")?(u.body=null,t.forEach(function(x){this._ajax.queue(x,u,"multi")},this),w=this._ajax.execQueue("multi")):w=this._ajax.exec(null,u),this.isLoading=!0,w.then(this._handleResult.bind(this),this._handleError.bind(this)),u.resultOnError&&w.then(null,this._handleResult.bind(this)),w},_handleResult:function(s){this.fire("ready",s,{prefix:!0}),this.isLoading=!1,s=this._plugin.processResponse(s),this.saveResponse&&(this.set?this.set("data",s.marshalled,null,!0):this.data=s.marshalled,this.fire("saved",s,{prefix:!0}))},_handleError:function(s){this.isLoading=!1,this.fire("error",s,{prefix:!0})},setGlobal:function(s,t){q.set(s,t)},getGlobal:function(s){return q.get(s)},//expose plugin config
get csrfConfig(){return this._plugin.getConfig("csrf")},get busterConfig(){return this._plugin.getConfig("buster")},get apiConfig(){return this._plugin.getConfig("api")},get pageConfig(){return this._plugin.getConfig("page")},fire:function(s,t,u){if(this._eventPrefix&&g.getPathValue("prefix",u)&&(s=this._eventPrefix+s),this.is)Polymer.Base.fire.call(this,s,t,u);else{//JS Object
var v=new CustomEvent(s,{detail:t});this.dispatchEvent(v)}}};var r=h.extend({},a.Sync.prototype,{properties:{data:{notify:!0},endpoint:{type:String,notify:!0},saveResponse:{type:Boolean,value:!0},isLoading:{type:Boolean,value:!1,notify:!0}},created:function(){this._plugin=new k(this.plugins||d())},ready:function(){a.Sync.apply(this)}});a.Sync.getBehavior=function(){return r},EventDispatcher.prototype.apply(a.Sync.prototype)})(window.StrandLib=window.StrandLib||{});</script><script>(function(a){a.DomMutable={properties:{mutationTarget:{type:Object,value:function(){return this}},observeSubtree:{type:Boolean,value:!1},observeCharacterData:{type:Boolean,value:!1},observeAttributes:{type:Boolean,value:!1},_observer:{type:Object,value:function(){return new MutationObserver(this._nodesChanged.bind(this))}}},attached:function(){this._observer.observe(this.mutationTarget,{childList:!0,subtree:this.observeSubtree,attributes:this.observeAttributes,characterData:this.observeCharacterData})},detached:function(){this._observer.disconnect()},_nodesChanged:function(b){var c=StrandLib.DataUtils.clone;c(b).forEach(function(d){if(d.addedNodes.length&&this.fire("added",{nodes:c(d.addedNodes)}),d.removedNodes.length){var e=c(d.removedNodes);this.fire("removed",{nodes:e})}0===d.addedNodes.length&&0===d.removedNodes.length&&this.fire("modified",{nodes:[d.target]})},this)}}})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){var b={properties:{contentTarget:{type:Object,value:function(){return this}}},getLightDOM:function(){// return Polymer.dom(this.contentTarget.$[this.contentId]).getDistributedNodes();
return Polymer.dom(this.contentTarget).queryDistributedElements("*")}};a.LightDomGettable=b})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){var b={properties:{domObject:{type:Object,value:function(){return{}},notify:!0},observeSubtree:{type:Boolean,value:!0},observeCharacterData:{type:Boolean,value:!0},observeAttributes:{type:Boolean,value:!0}},ready:function(){this.async(this._updateDomObject)},_updateDomObject:function(){this.set("domObject",StrandLib.DataUtils.objectifyDistributedNodes(this.getLightDOM())),this.domObjectChanged(this.domObject)},domObjectChanged:function(){},_nodesChanged:function(c){a.DomMutable._nodesChanged.apply(this,[c]),this._updateDomObject()}};a.DomGettable=[a.DomMutable,a.LightDomGettable,b]})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){a.Falsifiable={deserialize:function(b,c){switch(c){case Boolean:if(""===b)return!0;try{return JSON.parse(b)}catch(d){return console.warn("falsifiable: couldn`t decode Boolean"),b}break;default:return Polymer.Base.deserialize(b,c);}}}})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){function b(e){return e=e||{},{query:e.queryparam||[],urlParams:e.urlparam||[],headers:e.header||[]}}var c=StrandLib.DataUtils,d={properties:{auto:{type:Boolean,value:function(){this.async(function(){this.auto===void 0&&(this.auto=!0)})},observer:"_autoChanged"},autoDebounce:{type:Number,value:200}},observers:["_dataChanged(data.*)"],factoryImpl:function(e){this.auto=e},ready:function(){this.domHook=function(e){return this._getDomConfig(e,this.domObject)}.bind(this)},_getDomConfig:function(e){var f=this.domObject[e.toLowerCase()];f=b(f)||b();var g=function(i){return c.nodeCheckIf(i,c.nodeToParam)},h=function(i){return!!i};// return {
// 	headers: domConfig.headers.map(DataUtils.nodeToParam),
// 	query: domConfig.query.map(DataUtils.nodeToParam),
// 	urlParams: domConfig.urlParams.map(DataUtils.nodeInnerValue)
// };
return{headers:f.headers.map(g).filter(h),query:f.query.map(g).filter(h),urlParams:f.urlParams.map(function(i){return c.nodeCheckIf(i,c.nodeInnerValue)}).filter(h)}},_autoChanged:function(){this.auto&&"save"!==this.auto&&this.endpoint&&this.debounce("dom",this.get.bind(this),this.autoDebounce)},domObjectChanged:function(){this.auto&&"save"!==this.auto&&this.debounce("dom",this.get.bind(this),this.autoDebounce)},set:function(e,f,g,h){this._fromInternal=h,Polymer.Base.set.apply(this,[e,f,g])},_dataChanged:function(){this.auto&&"load"!==this.auto&&!this._fromInternal&&this.debounce("dom",this.post.bind(this),this.autoDebounce)}};a.DomSyncable=[a.DomGettable,a.Falsifiable,d]})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){var b=StrandLib.DataUtils,c={ready:function(){this.pageConfig.enabled=this.usePaging},properties:{usePaging:{type:Boolean,value:!1,observer:"_usePagingChanged"},page:{type:Number,value:0,observer:"_pageChanged"},pageSize:{type:Number,value:10,observer:"_pageSizeChanged"},index:{type:Number,value:0,observer:"_indexChanged"},pageOptions:{type:Object,value:function(){return{pageName:"page_offset",sizeName:"page_limit",url:!1,query:!0,body:!1,pageType:c.PAGE_TYPE_OFFSET}},observer:"_pageOptionsChanged"}},PAGE_TYPE_OFFSET:"offset",PAGE_TYPE_INDEX:"index",nextPage:function(){this.page++},prevPage:function(){0<this.page&&this.page--},reset:function(){this.silent?this.page=0:this.set("page",0)},_usePagingChanged:function(){this.pageConfig.enabled=this.usePaging},_pageChanged:function(){var d={page:this.page,pageSize:this.pageSize};this.pageConfig=b.copy(this.pageConfig,d),this.auto&&"save"!==this.auto&&0<=this.page&&(-1===this.autoDebounce?this.get():this.debounce("dom",this.get,this.autoDebounce))},_pageSizeChanged:function(){var d={page:this.page,pageSize:this.pageSize};this.pageConfig=b.copy(this.pageConfig,d),this.auto&&"Save"!==this.auto&&0<this.pageSize&&(-1===this.autoDebounce?this.get():this.debounce("dom",this.get,this.autoDebounce))},_indexChanged:function(){this.pageOptions&&this.pageOptions.pageType===c.PAGE_TYPE_OFFSET?this.set("page",this.index):this.set("page",Math.floor(this.index/this.pageSize))},_pageOptionsChanged:function(){if(this.pageConfig){var d={page:this.page,pageSize:this.pageSize};this.pageConfig=b.copy(this.pageConfig,d,this.pageOptions)}}};a.Pageable=[StrandLib.Sync.getBehavior(),a.DomSyncable,c]})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){var b={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(c){return this.$[c]||this.$$('#'+c)}};a.Refable=b})(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="strand-collection"><template><style>:host{display:none}</style><content id="content"></content></template><script>(function(a){StrandLib.DataUtils,StrandLib.Sync,StrandLib.Collection,a.Collection=Polymer({is:"strand-collection",_cidIndex:0,properties:{},behaviors:[// StrandLib.Sync.getBehavior(), //interhited from pageable
StrandTraits.Collection,StrandTraits.Pageable,StrandTraits.Refable]})})(window.Strand=window.Strand||{});</script></dom-module></body></html>