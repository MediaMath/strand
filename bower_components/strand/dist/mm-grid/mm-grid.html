<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"><link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../mm-item-recycler/mm-item-recycler.html"><link rel="import" href="../mm-grid-column/mm-grid-column.html"><link rel="import" href="../mm-grid-item/mm-grid-item.html"><link rel="import" href="../mm-checkbox/mm-checkbox.html"><link rel="import" href="../mm-icon/mm-icon.html"><link rel="import" href="../mm-loader/mm-loader.html"></head><body><div hidden by-vulcanize=""><script>!function(t){var e={ready:function(){this.hasAttribute("unresolved")&&this.removeAttribute("unresolved")}};t.Resolvable=e}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(i){var n=i.MixinFindable={properties:{mixinFindable:{type:Object,value:function(){return this},notify:!0}},mixinsForValue:function(i){return null},mixinsForValuePath:function(i,n){return null},prototypeAsMixin:function(i){var r={};Array.isArray(i.behaviors)&&i.behaviors.indexOf(n)<0?i.behaviors.push(n):i.behaviors||(i.behaviors=[n]);for(var t in i)r[t]=i[t];return i.mixinsForValue=function(){return r},i}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(t){t.TemplateFindable={properties:{_templateFound:{type:Object,computed:"_computeTemplate(templateFinder, templateFinder.template)"},templateFinder:{type:Object,notify:!0},templateFindable:{type:Object,value:function(){return this},notify:!0},templatePriority:{type:Array,value:function(){return["lightdom","import","bind"]},notify:!0},templateBind:{type:Object,value:null,notify:!0},templateMatch:{type:String,value:"template:not([is])",notify:!0},templateSelector:{type:String,value:"",notify:!0},templateUri:{type:String,notify:!0},templateQuery:{type:String,value:"template:not([is])",notify:!0}},ready:function(){this.notifyPath("templateFindable.templatePriority",this.templatePriority),this.notifyPath("templateFindable.templateBind",this.templateBind),this.notifyPath("templateFindable.templateMatch",this.templateMatch),this.notifyPath("templateFindable.templateSelector",this.templateSelector),this.notifyPath("templateFindable.templateUri",this.templateUri),this.notifyPath("templateFindable.templateQuery",this.templateQuery)},_computeTemplate:function(t,e){return e},_computeTemplateContents:function(t,e){return e},hasTemplate:function(){return 0|!!this._templateFound}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){var t={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(n){return this.$[n]}};n.Refable=t}(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="mm-grid"><template><style>:host ._mm_column{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 10px;vertical-align:middle;box-sizing:border-box;float:left}:host ._mm_column.right{text-align:right}:host ._mm_column.checkbox,:host ._mm_column.toggle{box-sizing:content-box;margin:auto 0;padding:0 5px}:host ._mm_column.checkbox:first-of-type,:host ._mm_column.toggle:first-of-type{padding-left:15px}:host ._mm_column.checkbox{width:18px}:host ._mm_column.toggle{width:10px}:host ._mm_column.toggle mm-icon{cursor:pointer;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host ._mm_column.toggle.expanded mm-icon{-webkit-transform:rotate(0);transform:rotate(0)}:host{display:block;position:relative;overflow:hidden;min-height:300px}:host([recycle=false]){min-height:0}:host([recycle=false]) #viewport{position:static}#footer,#header{display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:100%;background:#e0e0e0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#header{top:0}#footer{bottom:0}#viewport{height:100%;width:100%;top:0;bottom:0;overflow:auto;background:#fff}#separator{display:none;-webkit-transform:translateZ(0);transform:translateZ(0);position:absolute;top:0;height:100%;padding:0 50px;margin-left:-50px;cursor:col-resize}#separator:after{display:block;content:"";width:2px;height:100%;background-color:rgba(0,0,0,.3)}#separator.visible{display:block}#loader{top:50%;left:50%;right:50%;width:130px;height:28px;margin-top:-14px;margin-left:-75px}#columnContainer{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;width:100%}</style><mm-item-recycler id="viewport" gpu="{{gpu}}" data="{{data}}" scope="{{scope}}" index="{{index}}" template-finder="{{templateFinder}}" template-findable="{{templateFindable}}" mixin-findable="{{mixinFindable}}"><div id="header"><div class="_mm_column checkbox" hidden$="{{!selectable}}"><mm-checkbox id="selectAll" on-tap="_toggleAllSelections" state="{{_selectAllState}}"></mm-checkbox></div><div id="carat" class="_mm_column toggle" hidden$="{{!expandable}}"><mm-icon width="10" height="10" type="expand-all" on-tap="_toggleAllExpansions"></mm-icon></div><div id="columnContainer"><content id="columns" select="mm-grid-column"></content></div></div><content select="template:not([is])"></content><template preserve-content=""><mm-grid-item model="{{model}}" scope="{{scope}}"></mm-grid-item></template></mm-item-recycler><template is="dom-if" if="{{isLoading}}"><mm-loader id="loader"><label>Loading...</label></mm-loader></template><div id="separator"></div></template></dom-module><script>!function(t){function e(t,e){return t.reduce(function(t,i){return t[i[e]]=i,t},{})}t.Grid=Polymer({is:"mm-grid",properties:{gpu:{type:String,value:"2d"},data:Array,scope:{type:Object,notify:!0,value:function(){return this}},index:Number,_selectAllState:{type:String,value:"unchecked"},sortField:String,sortOrder:{type:Number,value:1},isLoading:{type:Boolean,value:!1},expanded:{type:Boolean,value:!1},selectable:{type:Boolean,value:!1,observer:"_selectableChanged"},expandable:{type:Boolean,value:!1,observer:"_expandableChanged"},_columns:{type:Array,value:function(){return[]},notify:!0,observer:"_columnsChanged"}},behaviors:[StrandTraits.Resolvable,StrandTraits.MixinFindable,StrandTraits.TemplateFindable,StrandTraits.Refable],listeners:{"column-resize-start":"_onColumnResizeStart","column-resize":"_onColumnResize","column-resize-end":"_onColumnResizeEnd","column-sort":"_onColumnSort","item-selected":"_onItemSelected"},observers:["_expansionChanged(expanded)","_onSortChanged(sortField, sortOrder)"],_expansionChanged:function(t){this.toggleClass("expanded",!!t,this.$.carat)},attached:function(){this.async(this._initialize)},_initialize:function(){this._initializeColumns(),this._setInitialColumnWidth()},_initializeColumns:function(){var t=Polymer.dom(this.$.columns).getDistributedNodes();t.length>0&&(this._columns=Array.prototype.slice.call(t),this._columnsMap=e(this._columns,"field"))},_columnsChanged:function(){this._columnsMap=e(this._columns,"field"),this.notifyPath("scope._columns",this._columns)},_selectableChanged:function(){this.notifyPath("scope.selectable",this.selectable)},_expandableChanged:function(){this.notifyPath("scope.expandable",this.expandable)},_setInitialColumnWidth:function(){var t=this._columns.every(function(t){return null===t.width||void 0===t.width});if(t){var e=100/this._columns.length;this._columns.forEach(function(t){t.width=e+"%"})}},_onItemSelected:function(t,e,i){var n=this.selected,s=e,o=Array.isArray(this.data)?this.data.indexOf(s):-1,a="unchecked";n.length>0&&(a="partial"),n.length===this.data.length&&(a="checked"),s&&o>-1&&this.set("data."+o+".selected",s.selected),this._selectAllState=a},_toggleAllSelections:function(t){this.setAllSelections(t.target.checked)},setAllSelections:function(t){var e=!!t;this._selectAllState=e?"checked":"unchecked",this.data&&this.data.forEach(function(t,i){var n="data."+i+".selected";this.set(n,e)},this)},get selected(){return this.data&&this.data.filter(function(t){return t.selected})},_onColumnResizeStart:function(t){this._columnOffset=t.detail.val},_onColumnResize:function(t){var e=this._columnOffset+t.detail.val-this.$.viewport.scrollLeft;this.translate3d(e+"px",0,0,this.$.separator),this._showSeparator()},_showSeparator:function(){this.$.separator.classList.add("visible"),document.body.style.cursor="col-resize"},_hideSeparator:function(){this.$.separator.classList.remove("visible"),document.body.style.cursor=""},_onColumnResizeEnd:function(t){this._resizeColumns(t.detail.field,t.detail.val),this._hideSeparator()},_resizeColumns:function(t,e){var i=this._columnsMap[t];this._columns.indexOf(i);this._columns.forEach(function(t,e){-1!==t.width.indexOf("%")&&t.set("width",t.offsetWidth+"px"),this.notifyPath("scope._columns."+e+".width",t.width)},this)},_onSortChanged:function(){this.sortBy(this.sortField,this.sortOrder)},_onColumnSort:function(t){this.sortField=t.detail.field,this.sortOrder=t.detail.val},sortBy:function(t,e){var i=arguments.length>1?e:null;this._columns.forEach(function(e){e.sortOrder=e.SORT_DEFAULT,e.sortField===t&&(i===e.SORT_ASCENDING||i===e.SORT_DESCENDING?e.sortOrder=i:null===i&&(e.sortOrder=e.SORT_ASCENDING))})},_toggleAllExpansions:function(t,e,i){this.setAllExpansions(!this.expanded)},setAllExpansions:function(t){var e=!!t;this.set("expanded",e),this.$.viewport.inferOffviewHeightsAfterNextMutation(),this.data&&this.data.forEach(function(t,e){this.set("data."+e+".expanded",this.expanded)},this)},requestInitialization:function(){return this.$.viewport.initialize()},createId:function(t,e){return t+e}})}(window.Strand=window.Strand||{});</script></body></html>