<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"><link rel="import" href="../../bower_components/polymer/polymer.html"></head><body><div hidden by-vulcanize=""><script>!function(n){var t={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(n){return this.$[n]}};n.Refable=t}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){function e(n,e){return Object.prototype.toString.call(n).toLowerCase()==="[object "+e.toLowerCase()+"]"}function r(n){return void 0!==n&&null!==n}function t(n){return n?Array.prototype.slice.call(n):void 0}function u(n,e){return e?-1===e.indexOf(n.name):!0}function i(n,e,r){var i={},a=t(n.attributes);return a&&(a.forEach(function(n){if(u(n,e))try{i[n.name]=JSON.parse(n.value)}catch(r){""===n.value?i[n.name]=!0:i[n.name]=n.value}}),n.innerHTML&&r&&(i.inner=n.innerHTML.trim())),i}function a(){var n={},e=t(arguments);return e.forEach(function(e){e.length>0&&o(e,n)}),c(n)}function o(n,e){if(0===n.length)return{};var r,t,u=e||{};for(r=n.length-1;r>=0;r--)t=n[r],u[t.name]=t.value;return u}function c(n){var e=[];for(var r in n)e.push({name:r,value:n[r]});return e}function f(){var n=t(arguments),r=n.length>1?n.shift():{};return n.reduce(function(n,r){if(e(r,"object"))for(var t in r)n[t]=r[t];return n},r)}function l(n,r){if(!r)return null;var t=n;return"string"==typeof n&&(t=n.split(".")),t.reduce(function(n,r){return e(n,"object")&&r in n?n[r]:null},r)}function s(n,e,r,t){if(e){var u=n;"string"==typeof n&&(u=n.split("."));var i=u.slice(-1)[0];u.reduce(function(n,e){return e===i?n[e]=r:t&&!n[e]&&(n[e]={}),n[e]},e)}}function v(n){return n.value||n.inner}function d(n){return{name:n.name,value:v(n)}}function m(n,e){if(n.conditional){var t=(!r(n["if"])||JSON.parse(n["if"]),r(n["if"])&&JSON.parse(n["if"]));return t?e(n):null}return e(n)}var h={clone:t,copy:f,isType:e,objectifyAttributes:i,isDef:r,param:function(n,e){return{name:n,value:e}},packParams:o,unpackParams:c,uniqueMergeParams:a,objectifyDistributedNodes:function(n,e){function r(n){return n.nodeType===Node.ELEMENT_NODE}return n=t(n).filter(r),n.reduce(function u(n,e){var r=e.nodeName.toLowerCase();return void 0===n[r]&&(n[r]=[]),e.children.length>0?n[r]=t(e.children).reduce(u,{}):n[r].push(i(e,null,!0)),n},{})},nodeInnerValue:v,nodeToParam:d,nodeCheckIf:m,mergeParamLists:function(){var n,e,r,u={},i=[],a=[],o=t(arguments);for(n=o.length-1;n>=0;n--)if(a=o[n],a&&a.length)for(e=a.length-1;e>=0;e--)r=a[e],r&&!u[r.name||r]&&(i.push(r),u[r.name||r]=!0);return i.reverse()},getPathValue:l,setPathValue:s};n.DataUtils=h}(window.StrandLib=window.StrandLib||{});</script><script>!function(r){var n=StrandLib.DataUtils;r.BehaviorUtils={extend:function(r){return Array.prototype.slice.call(arguments,1).forEach(function(n){var i,t;if(n)for(t in n)i=Object.getOwnPropertyDescriptor(n,t),Object.defineProperty(r,t,i)}),r},callProtochain:function(r,n,i){for(var t=n.behaviors,e=0;e<t.length;e++)t[e][r]&&t[e][r].apply(n,i)},findSuper:function(i,t){return n.isType(i,"array")?i.reduce(function(i,e,o,a){if(n.isType(e,"array"))return r.BehaviorUtils.findSuper(e,t);var c=e[t];return c&&c instanceof Function?c:i},Function()):i&&i[t]?i[t]:void console.warn("This doesnt look like a behavior array")}}}(window.StrandLib=window.StrandLib||{});</script><script>(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function e(t){return"object"==typeof t&&null!==t}function r(t){U=t}function o(t){G=t}function i(){return function(){process.nextTick(f)}}function u(){return function(){N(f)}}function s(){var t=0,n=new Q(f),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=f,function(){t.port2.postMessage(0)}}function a(){return function(){setTimeout(f,1)}}function f(){for(var t=0;B>t;t+=2){var n=X[t],e=X[t+1];n(e),X[t]=void 0,X[t+1]=void 0}B=0}function l(){try{var t=require,n=t("vertx");return N=n.runOnLoop||n.runOnContext,u()}catch(e){return a()}}function p(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(n){return nt.error=n,nt}}function d(t,n,e,r){try{t.call(n,e,r)}catch(o){return o}}function y(t,n,e){G(function(t){var r=!1,o=d(e,n,function(e){r||(r=!0,n!==e?g(t,e):A(t,e))},function(n){r||(r=!0,E(t,n))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,E(t,o))},t)}function m(t,n){n._state===$?A(t,n._result):n._state===tt?E(t,n._result):j(n,void 0,function(n){g(t,n)},function(n){E(t,n)})}function b(t,e){if(e.constructor===t.constructor)m(t,e);else{var r=v(e);r===nt?E(t,nt.error):void 0===r?A(t,e):n(r)?y(t,e,r):A(t,e)}}function g(n,e){n===e?E(n,_()):t(e)?b(n,e):A(n,e)}function w(t){t._onerror&&t._onerror(t._result),S(t)}function A(t,n){t._state===Z&&(t._result=n,t._state=$,0!==t._subscribers.length&&G(S,t))}function E(t,n){t._state===Z&&(t._state=tt,t._result=n,G(w,t))}function j(t,n,e,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=n,o[i+$]=e,o[i+tt]=r,0===i&&t._state&&G(S,t)}function S(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var r,o,i=t._result,u=0;u<n.length;u+=3)r=n[u],o=n[u+e],r?x(e,r,o,i):o(i);t._subscribers.length=0}}function T(){this.error=null}function P(t,n){try{return t(n)}catch(e){return et.error=e,et}}function x(t,e,r,o){var i,u,s,c,a=n(r);if(a){if(i=P(r,o),i===et?(c=!0,u=i.error,i=null):s=!0,e===i)return void E(e,h())}else i=o,s=!0;e._state!==Z||(a&&s?g(e,i):c?E(e,u):t===$?A(e,i):t===tt&&E(e,i))}function C(t,n){try{n(function(n){g(t,n)},function(n){E(t,n)})}catch(e){E(t,e)}}function M(t,n){var e=this;e._instanceConstructor=t,e.promise=new t(p),e._validateInput(n)?(e._input=n,e.length=n.length,e._remaining=n.length,e._init(),0===e.length?A(e.promise,e._result):(e.length=e.length||0,e._enumerate(),0===e._remaining&&A(e.promise,e._result))):E(e.promise,e._validationError())}function O(t){return new rt(this,t).promise}function k(t){function n(t){g(o,t)}function e(t){E(o,t)}var r=this,o=new r(p);if(!z(t))return E(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,u=0;o._state===Z&&i>u;u++)j(r.resolve(t[u]),void 0,n,e);return o}function Y(t){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var e=new n(p);return g(e,t),e}function q(t){var n=this,e=new n(p);return E(e,t),e}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(t){this._id=ct++,this._state=void 0,this._result=void 0,this._subscribers=[],p!==t&&(n(t)||F(),this instanceof D||I(),C(this,t))}function K(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;(!e||"[object Promise]"!==Object.prototype.toString.call(e.resolve())||e.cast)&&(t.Promise=at)}var L;L=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N,U,W,z=L,B=0,G=({}.toString,function(t,n){X[B]=t,X[B+1]=n,B+=2,2===B&&(U?U(f):W())}),H="undefined"!=typeof window?window:void 0,J=H||{},Q=J.MutationObserver||J.WebKitMutationObserver,R="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3);W=R?i():Q?s():V?c():void 0===H&&"function"==typeof require?l():a();var Z=void 0,$=1,tt=2,nt=new T,et=new T;M.prototype._validateInput=function(t){return z(t)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var rt=M;M.prototype._enumerate=function(){for(var t=this,n=t.length,e=t.promise,r=t._input,o=0;e._state===Z&&n>o;o++)t._eachEntry(r[o],o)},M.prototype._eachEntry=function(t,n){var r=this,o=r._instanceConstructor;e(t)?t.constructor===o&&t._state!==Z?(t._onerror=null,r._settledAt(t._state,n,t._result)):r._willSettleAt(o.resolve(t),n):(r._remaining--,r._result[n]=t)},M.prototype._settledAt=function(t,n,e){var r=this,o=r.promise;o._state===Z&&(r._remaining--,t===tt?E(o,e):r._result[n]=e),0===r._remaining&&A(o,r._result)},M.prototype._willSettleAt=function(t,n){var e=this;j(t,void 0,function(t){e._settledAt($,n,t)},function(t){e._settledAt(tt,n,t)})};var ot=O,it=k,ut=Y,st=q,ct=0,at=D;D.all=ot,D.race=it,D.resolve=ut,D.reject=st,D._setScheduler=r,D._setAsap=o,D._asap=G,D.prototype={constructor:D,then:function(t,n){var e=this,r=e._state;if(r===$&&!t||r===tt&&!n)return this;var o=new this.constructor(p),i=e._result;if(r){var u=arguments[r-1];G(function(){x(r,o,u,i)})}else j(e,o,t,n);return o},"catch":function(t){return this.then(null,t)}};var ft=K,lt={Promise:at,polyfill:ft};"function"==typeof define&&define.amd?define(function(){return lt}):"undefined"!=typeof module&&module.exports?module.exports=lt:"undefined"!=typeof this&&(this.ES6Promise=lt),ft()}).call(this);</script><script>var EventDispatcher=function(){};EventDispatcher.prototype={constructor:EventDispatcher,apply:function(e){e.addEventListener=EventDispatcher.prototype.addEventListener,e.hasEventListener=EventDispatcher.prototype.hasEventListener,e.removeEventListener=EventDispatcher.prototype.removeEventListener,e.dispatchEvent=EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return!(void 0===i[e]||-1===i[e].indexOf(t))},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,n=i[e];if(void 0!==n){var s=n.indexOf(t);-1!==s&&n.splice(s,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,i=t[e.type];if(void 0!==i){e.target=this;for(var n=[],s=i.length,r=0;s>r;r++)n[r]=i[r];for(var r=0;s>r;r++)n[r].call(this,e)}}}};</script><script>!function(e){function t(e){e=e||{},this.url=e.url,this.method=e.method||t.GET,this.body=e.body,this.responseType=e.responseType,this.contentType=e.contentType,this.headers=e.headers,this.withCredentials=e.withCredentials,this.timeout=e.timeout,this.username=e.username,this.password=e.password,this.progress=e.progress,this.requestMarshaller=e.requestMarshaller,this.responseMarshaller=e.responseMarshaller,this.options=e,this.defer={},this.xhr=new XMLHttpRequest,this.promise=new Promise(function(e,t){this.defer.resolve=e,this.defer.reject=t}.bind(this))}var s=StrandLib.DataUtils;t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.prototype={exec:function(){return this.method&&this.url?(this.xhr.open(this.method,this.url,!0,this.username,this.password),this.xhr.responseType=this.responseType||"",this.xhr.timeout=this.timeout||1e4,this.xhr.withCredentials=this.withCredentials,this.xhr.onreadystatechange=this.readyStateChange.bind(this),this.xhr.addEventListener("abort",this.handleAbort.bind(this)),this.xhr.addEventListener("progress",this.handleProgress.bind(this)),this.contentType&&this.xhr.setRequestHeader("content-type",this.contentType),this.headers&&this.headers.forEach(function(e){this.xhr.setRequestHeader(e.name,e.value)}.bind(this)),this.fire("preflight",{instance:this}),this.xhr.send(this.body),this.promise):(this.defer.reject({error:"url and method are required!!",instance:this,response:null}),this.promise)},readyStateChange:function(){var e={};4===this.xhr.readyState&&(this.fire("result",{instance:this}),this.response=this.responseHandler[this.xhr.responseType||"json"].call(this),!this.xhr.status||this.xhr.status>=200&&this.xhr.status<300?(e={response:this.response,instance:this},this.promise&&(this.defer.resolve(e),this.fire("response",e))):(e={error:this.xhr.status,instance:this,response:this.response},this.promise&&(this.defer.reject(e),this.fire("error",e))))},handleAbort:function(){if(this.promise){var e={error:"aborted",instance:this,response:null};this.defer.reject(e),this.fire("preflight",e)}},handleProgress:function(e){var t=this._getProgressDetail(e);this.progress&&this.progress(t),this.fire("progress",t)},_getProgressDetail:function(e){var t=s.isDef(e.loaded)?e.loaded:e.position,r=s.isDef(e.total)?e.total:e.totalSize;return{percent:Math.round(t/r*100),current:t,total:r}},responseHandler:{xml:function(){return this.xhr.responseXML},text:function(){return this.xhr.responseText},json:function(){var e=this.xhr.responseText;try{return JSON.parse(e)}catch(t){var s={error:t.message,instance:this,response:e};return this.fire("error",s),this.defer.reject(s),e}},document:function(){return this.xhr.response},blob:function(){return this.xhr.response},arrayBuffer:function(){return this.xhr.response}},abort:function(){this.xhr&&(this.xhr.abort(),this.fire("abort",{instance:this}))},fire:function(e,t){this._eventPrefix&&(e=this._eventPrefix+e);var s=new CustomEvent(e,{detail:t});this.dispatchEvent(s)},get status(){return this.xhr&&this.xhr.status},get state(){return this.xhr&&this.xhr.readyState}},EventDispatcher.prototype.apply(t.prototype),e.Request=t}(window.StrandLib=window.StrandLib||{});</script><script>!function(t){function e(t,e,i){if(!t)throw new Error("request array is required");this.work=t.slice(),this.results=[],this.failures=[],this.flight=[],this.concurrency=e,this.processHook=i,this.defer={},this.promise=new Promise(function(t,e){this.defer.resolve=t,this.defer.reject=e}.bind(this))}e.prototype={next:function(t){t&&(this.results=this.results.concat(t));var e=this.work.splice(0,this.concurrency).map(function(t){return this.flight.push(t),this.processHook&&this.processHook(t),t.exec()},this);if(e&&e.length>0){var i=Promise.all(e);i.then(this.next.bind(this),this.fail.bind(this))}else this.defer.resolve(this.results)},fail:function(t){this.defer.reject(t),this.failures.push(t)},exec:function(){this.next()},abort:function(){this.work=[],this.flight.forEach(function(t){t.abort()}),this.defer.reject(new Error("Aborted"))}},t.RequestQueue=e}(window.StrandLib=window.StrandLib||{});</script><script>!function(e){function t(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e,r,n,s){s=s||t;var o,u=[];r=r||"",n=n||0;for(var a in e)o=e[a],name=0===n?a:"["+a+"]","object"==typeof o?u=u.concat(i(o,r+name,n+1)):u.push(s(r+name,o));return u}function r(e){this._eventPrefix=n,this.recent={},this.requests=[],this.options=s.copy({},{contentType:"application/x-www-form-urlencoded",method:u.GET,withCredentials:!1,timeout:1e4},e)}var n="ajax-",s=StrandLib.DataUtils,o=StrandLib.BehaviorUtils,u=StrandLib.Request,a=StrandLib.RequestQueue;r.GET=u.GET,r.POST=u.POST,r.PUT=u.PUT,r.DELETE=u.DELETE,r.prototype={queue:function(e,t,i){var r=this._requestFactory(e,t);return this._getQueue(i,!0).push(r),r.promise},execQueue:function(e){var t=this._getQueue(e),i=new a(t,this.options.concurrency,function(e){this.current=e}.bind(this));return i.exec(),t.running=i,i.promise},exec:function(e,t){var i=this._requestFactory(e,t);return this.requests.push(i),this.current=i,i.exec(),i.promise},_getQueue:function(e,t){return e?this[e]?this[e]:t?(this[e]=[],this[e]):void 0:this.requests},_requestFactory:function(e,t){var i=s.copy;t=i({},this.options,t);var r=this.serializeUrl(t.url,t.urlParams);return r=this.serializeQuery(r,t.query),e=this.setRequestData(t.method,t.contentType,e,t.body),new u(i(t,{url:r,body:e}))},abort:function(){this.current&&(this.current.abort(),this.fire("abort",{instance:this},{prefix:!0}))},abortQueue:function(e){_getQueue(e).running.abort(),this.fire("abort-queue",{instance:this},{prefix:!0})},addHeader:function(e,t){this.options.headers=this.options.headers||[],this.options.headers.push({name:e,value:t})},addParam:function(e,t){this.options.query=this.query||[],this.options.query.push({name:e,value:t})},addUrlParam:function(e){this.options.urlParams=this.urlParams||[],this.options.urlParams.push(e)},setRequestData:function(e,t,i,r){var n,o;if(i){if("string"==typeof i)return i;n=s.copy({},r,i)}else n=r;if(e.match(/(POST|PUT|DELETE)/i))if("application/json"===t)o=n;else if("multipart/form-data"===t)if(n instanceof FormData)o=n;else{var u=new FormData;this.__serialize(n,u.append.bind(u)),o=u}else o=this.__serialize(n).join("&");return o},serializeUrl:function(e,t){return e=e||"",t&&t.length>0&&("/"!==e.slice(-1)&&(e+="/"),e+=t.join("/")),e},serializeQuery:function(e,t){if(t&&t.length){if(-1!==e.indexOf("?")){var i=e.slice(-1);"&"!==i&&"?"!==i&&(e+="&")}else e+="?";e+=this.__serialize(t).join("&")}return e},__serialize:function(e,r){r=r||t;var n,o,u=[];if("string"==typeof e)try{e=JSON.parse(e)}catch(a){this.fire("error",{error:a,instance:this},{prefix:!0})}if(s.isType(e,"array"))for(n=e.length-1;n>=0;n--)o=e[n],null!==o.name&&null!==o.value&&u.push(r(o.name,o.value));else u=i(e,null,null,r);return u},fire:function(e,t,i){if(this._eventPrefix&&s.getPathValue("prefix",i)&&(e=this._eventPrefix+e),this.is)Polymer.Base.fire.call(this,e,t,i);else{var r=new CustomEvent(e,{detail:t});this.dispatchEvent(r)}},get status(){return this.current&&this.current.xhr.status},get state(){return this.current&&this.current.state},get xhr(){return this.current&&this.current.xhr}};var h=o.extend({},r.prototype,{properties:{url:{type:String,notify:!0},response:{type:Object,notify:!0}},ready:function(){r.apply(this)}});r.getBehavior=function(){return h},EventDispatcher.prototype.apply(r.prototype),e.Ajax=r}(window.StrandLib=window.StrandLib||{});</script></div><dom-module id="mm-ajax"><template><style>:host{display:none}</style></template><script>!function(e){var t=StrandLib.BehaviorUtils,r=StrandLib.Ajax.getBehavior();e.Ajax=Polymer({is:"mm-ajax",GET:StrandLib.Ajax.GET,POST:StrandLib.Ajax.POST,PUT:StrandLib.Ajax.PUT,DELETE:StrandLib.Ajax.DELETE,behaviors:[r,StrandTraits.Refable],properties:{url:{type:String,value:"",observer:"_updateOpts"},query:{type:String,value:"",observer:"_updateOpts"},method:{type:String,value:"GET",observer:"_updateOpts"},responseType:{type:String,value:"",observer:"_updateOpts"},response:{type:Object,value:function(){return{}},notify:!0},contentType:{type:String,value:"application/x-www-form-urlencoded",observer:"_updateOpts"},auto:{type:Boolean,value:!1,observer:"_updateOpts"},body:{type:Object,value:null,observer:"_updateOpts"},withCredentials:{type:Boolean,value:!1,observer:"_updateOpts"},timeout:{type:Number,value:1e4,observer:"_updateOpts"},concurrency:{type:Number,value:4,observer:"_updateOpts"},progress:{type:Object,value:function(){return{percent:0,total:0,current:0}},notify:!0}},ready:function(){this.async(function(){this._validateAjax()&&this.exec()})},_updateOpts:function(){this.debounce("options",function(){this.options=StrandLib.DataUtils.copy(this.options,{contentType:this.contentType,responseType:this.responseType,method:this.method,url:this.url,body:this.body,query:this.query,withCredentials:this.withCredentials,timeout:this.timeout,concurrency:this.concurrency})}.bind(this))},_validateAjax:function(){if(!this.method||!this.auto)return!1;if(this.method===StrandLib.Ajax.GET){if(this.url)return!0}else if(this.url&&this.body)return!0;return!1},exec:function(e,s){var n=t.findSuper(r,"exec"),i=n.apply(this,arguments);return this.current.progress=this._handleProgress.bind(this),i.then(this._handleResponse.bind(this),this._handleError.bind(this)),i},abort:function(){var e=t.findSuper(r,"abort");e.apply(this,arguments),this.current&&this.current.promise.then(this._handleAbort.bind(this),this._handleAbort.bind(this))},_handleAbort:function(e){this.fire("data-abort",e)},_handleResponse:function(e){e.response&&this.set("response",e.response),this.fire("data-ready",e)},_handleError:function(e){e.response&&this.set("response",e.response),this.fire("data-error",e)},_handleProgress:function(e){this.progress=e,this.fire("data-progress",e)}})}(window.Strand=window.Strand||{});</script></dom-module></body></html>