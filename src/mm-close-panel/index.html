<!DOCTYPE html>
<html>
	<head>
	<script language="javascript" src="../../bower_components/webcomponentsjs/webcomponents.js"></script>
		<link rel="import" href="../../bower_components/polymerLegacy/polymer.html">
		<!-- <link rel="import" href="mm-close-panel.html"> -->
		<link rel="import" href="../mm-list/mm-list.html">
		<link rel="import" href="../mm-list-item/mm-list-item.html">
		<link rel="import" href="../mm-button/mm-button.html">
		<link rel="import" href="../mm-dropdown/mm-dropdown.html">
		<link rel="import" href="../mm-dropdown/mm-dropdown.html">
		<link rel="import" href="../shared/js/measure.html">
		<style>
			body, 
			html {
				margin: 0;
				padding: 0;
			}

			body {
				margin: 10px;
			}

			#cpb2 {
				position: absolute;
				top: 50%;
				left: 50%;
				margin-left: -51px;
				margin-top: -15px;
			}
		</style>

	</head>
	<body unresolved>
		 
		<mm-button id="cpb2" class="side-test">
			<label>panel target</label>
		</mm-button> 
		
		<mm-close-panel id="cp" mode="popover" offsetX="0" offsetY="0">

			<mm-list>
				<mm-list-item>Example #1: Its Time to get on up and celebrate</mm-list-item>
				<mm-list-item>Example #2: Its Time</mm-list-item>
				<mm-list-item>Example #3: Its Time</mm-list-item>
				<mm-list-item>Example #4: Its Time</mm-list-item>
				<mm-list-item>Example #5: Its Time</mm-list-item>
				<mm-list-item>Example #6: Its Time</mm-list-item>
				<mm-list-item>Example #7: Its Time</mm-list-item>
			</mm-list>

		</mm-close-panel>

		<script>
			var cp,
				cpb,
				cpb2,
				drag = false;
			
			window.addEventListener("polymer-ready", function() {
				cp = document.getElementById("cp"),
				cpb2 = document.getElementById("cpb2"),
				cp.target = cpb2;

				init();
			});

			function init() {
				cpb2.addEventListener("mouseup", handleCpb);
				cpb2.addEventListener("mousedown", handleCpb2MouseDown);
			}

			function handleCpb(e) {
				cp.toggle();
			}

			function handleCpb2MouseDown(e) {
				drag = true;
				document.addEventListener("mouseup", handleMouseUp);
				document.addEventListener("mousemove", handleDrag);
			}

			function handleMouseUp(e) {
				drag = false;
				document.removeEventListener("mouseup", handleMouseUp);
				document.removeEventListener("mousemove", handleDrag);
			}

			function handleDrag(e) {
				if (drag === true) {
					cpb2.style.left = e.pageX + "px";
					cpb2.style.top = e.pageY + "px";
				}
			}
		</script>
	</body>
</html>