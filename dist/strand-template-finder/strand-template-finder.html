<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"><link rel="import" href="../../bower_components/polymer/polymer.html"></head><body><div hidden by-vulcanize=""><script>!function(t){t.TemplateFindable={properties:{_templateFound:{type:Object,computed:"_computeTemplate(templateFinder, templateFinder.template)"},templateFinder:{type:Object,notify:!0},templateFindable:{type:Object,value:function(){return this},notify:!0},templatePriority:{type:Array,value:function(){return["lightdom","import","bind"]},notify:!0},templateBind:{type:Object,value:null,notify:!0},templateMatch:{type:String,value:"template:not([is])",notify:!0},templateSelector:{type:String,value:"",notify:!0},templateUri:{type:String,notify:!0},templateQuery:{type:String,value:"template:not([is])",notify:!0}},ready:function(){this.notifyPath("templateFindable.templatePriority",this.templatePriority),this.notifyPath("templateFindable.templateBind",this.templateBind),this.notifyPath("templateFindable.templateMatch",this.templateMatch),this.notifyPath("templateFindable.templateSelector",this.templateSelector),this.notifyPath("templateFindable.templateUri",this.templateUri),this.notifyPath("templateFindable.templateQuery",this.templateQuery)},_computeTemplate:function(t,e){return e},_computeTemplateContents:function(t,e){return e},hasTemplate:function(){return 0|!!this._templateFound}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){function e(n,e){return Object.prototype.toString.call(n).toLowerCase()==="[object "+e.toLowerCase()+"]"}function r(n){return void 0!==n&&null!==n}function t(n){return n?Array.prototype.slice.call(n):void 0}function u(n,e){return e?-1===e.indexOf(n.name):!0}function i(n,e,r){var i={},a=t(n.attributes);return a&&(a.forEach(function(n){if(u(n,e))try{i[n.name]=JSON.parse(n.value)}catch(r){""===n.value?i[n.name]=!0:i[n.name]=n.value}}),n.innerHTML&&r&&(i.inner=n.innerHTML.trim())),i}function a(){var n={},e=t(arguments);return e.forEach(function(e){e.length>0&&o(e,n)}),c(n)}function o(n,e){if(0===n.length)return{};var r,t,u=e||{};for(r=n.length-1;r>=0;r--)t=n[r],u[t.name]=t.value;return u}function c(n){var e=[];for(var r in n)e.push({name:r,value:n[r]});return e}function f(){var n=t(arguments),r=n.length>1?n.shift():{};return n.reduce(function(n,r){if(e(r,"object"))for(var t in r)n[t]=r[t];return n},r)}function l(n,r){if(!r)return null;var t=n;return"string"==typeof n&&(t=n.split(".")),t.reduce(function(n,r){return e(n,"object")&&r in n?n[r]:null},r)}function s(n,e,r,t){if(e){var u=n;"string"==typeof n&&(u=n.split("."));var i=u.slice(-1)[0];u.reduce(function(n,e){return e===i?n[e]=r:t&&!n[e]&&(n[e]={}),n[e]},e)}}function v(n){return n.value||n.inner}function d(n){return{name:n.name,value:v(n)}}function m(n,e){if(n.conditional){var t=(!r(n["if"])||JSON.parse(n["if"]),r(n["if"])&&JSON.parse(n["if"]));return t?e(n):null}return e(n)}var h={clone:t,copy:f,isType:e,objectifyAttributes:i,isDef:r,param:function(n,e){return{name:n,value:e}},packParams:o,unpackParams:c,uniqueMergeParams:a,objectifyDistributedNodes:function(n,e){function r(n){return n.nodeType===Node.ELEMENT_NODE}return n=t(n).filter(r),n.reduce(function u(n,e){var r=e.nodeName.toLowerCase();return void 0===n[r]&&(n[r]=[]),e.children.length>0?n[r]=t(e.children).reduce(u,{}):n[r].push(i(e,null,!0)),n},{})},nodeInnerValue:v,nodeToParam:d,nodeCheckIf:m,mergeParamLists:function(){var n,e,r,u={},i=[],a=[],o=t(arguments);for(n=o.length-1;n>=0;n--)if(a=o[n],a&&a.length)for(e=a.length-1;e>=0;e--)r=a[e],r&&!u[r.name||r]&&(i.push(r),u[r.name||r]=!0);return i.reverse()},getPathValue:l,setPathValue:s};n.DataUtils=h}(window.StrandLib=window.StrandLib||{});</script><script>!function(e){e.DomMutable={properties:{mutationTarget:{type:Object,value:function(){return this}},observeSubtree:{type:Boolean,value:!1},observeCharacterData:{type:Boolean,value:!1},observeAttributes:{type:Boolean,value:!1},_observer:{type:Object,value:function(){return new MutationObserver(this._nodesChanged.bind(this))}}},attached:function(){this._observer.observe(this.mutationTarget,{childList:!0,subtree:this.observeSubtree,attributes:this.observeAttributes,characterData:this.observeCharacterData})},detached:function(){this._observer.disconnect()},_nodesChanged:function(e){var t=StrandLib.DataUtils.clone;t(e).forEach(function(e){if(e.addedNodes.length&&this.fire("added",{nodes:t(e.addedNodes)}),e.removedNodes.length){var r=t(e.removedNodes);this.fire("removed",{nodes:r})}0===e.addedNodes.length&&0===e.removedNodes.length&&this.fire("modified",{nodes:[e.target]})},this)}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){var t={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(n){return this.$[n]}};n.Refable=t}(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="mm-template-finder"><template><style>:host{display:none}</style><noscript id="concealer" hidden><content id="content"></content></noscript></template></dom-module><script>!function(e){Polymer({is:"mm-template-finder",behaviors:[StrandTraits.TemplateFindable,StrandTraits.Refable],properties:{template:{type:Object,value:null,notify:!0,readOnly:!0},templateFinder:{type:Object,value:function(){return this},notify:!0},_templateStore:Object,_remoteDoc:Object,_lazyHTML:{type:String,value:"",readOnly:!0}},observers:["_selectTemplate(templateFindable.templateMatch, templateFindable.templateSelector)","_startTemplateImport(templateFindable.templateUri)","_finishTemplateImport(templateFindable.templateQuery, _remoteDoc)","_observeTemplate(templateFindable.templateBind)"],ready:function(){var e=this;Polymer.dom(this.$.content).observeNodes(function(t){var l=e.templateFindable;e._selectTemplate(l.templateMatch,l.templateSelector)})},templateInnerHTML:function(){var e=this._lazyHTML;return e||this.template&&this._set_lazyHTML(Polymer.dom(this.template).innerHTML),e||this._lazyHTML||""},_lazyTemplateStore:function(){return this._templateStore||(this._templateStore={}),this._templateStore},_computeTemplateDoc:function(e){return e&&e.documentElement||null},_selectTemplate:function(){var e=this.templateFindable,t=e.templateMatch?String(e.templateMatch):"",l=e.templateSelector?String(e.templateSelector):"",a=this._lazyTemplateStore(),i=t&&this.queryEffectiveChildren(t)||null;a.lightdom=i&&l&&i.querySelector(l)||i,this._updateTemplate()},_startTemplateImport:function(){var e=this.templateFindable;e.templateUri&&this.importHref(e.templateUri,function(e){this._remoteDoc=e.target["import"]},function(e){console.error(e)})},_finishTemplateImport:function(){var e=this.templateFindable,t=this._remoteDoc||null,l=e.templateQuery||"",a=this._lazyTemplateStore();a["import"]=t&&l&&t.querySelector(l)||null,this._updateTemplate()},_observeTemplate:function(){var e=this.templateFindable,t=this._lazyTemplateStore();t.bind=e.templateBind||null,this._updateTemplate()},_updateTemplate:function(){var e=this.templateFindable,t=null,l=e.templatePriority,a=this._lazyTemplateStore(),i=l?l.length:-1,r=0;if(!(0>i)){for(r;i>r&&!(t=a[l[r]]);r++);this._set_lazyHTML(""),this._setTemplate(t),this.notifyPath("templateFinder.template",t)}}})}(window.Strand=window.Strand||{});</script></body></html>