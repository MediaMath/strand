<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 
--><html><head><link rel="import" href="../../bower_components/polymerLegacy/polymer.html"><link rel="import" href="../mm-header/mm-header.html"><link rel="import" href="../mm-icon/mm-icon.html"><link rel="import" href="../shared/js/colors.html"><link rel="import" href="../shared/js/datautils.html"><link rel="import" href="../shared/js/moment.html"><link rel="import" href="../shared/js/momentrange.html"></head><body><polymer-element name="mm-calendar" attributes="days month year" assetpath=""><template><style type="text/css">:host{position:relative;display:inline-block;vertical-align:middle;font-size:0;line-height:0}:host([disabled]){pointer-events:none;opacity:.5}polyfill-next-selector{content:".calendar, .month-year"}.calendar,.month-year{box-sizing:border-box;background:#fff;width:188px;position:relative;padding:3px}polyfill-next-selector{content:".calendar"}.calendar{padding-bottom:2px}polyfill-next-selector{content:".month-year"}.month-year{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:justify;-moz-box-pack:justify;box-pack:justify;-webkit-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-ms-flex-pack:justify;margin-bottom:4px}.month-year .left-arrow,.month-year .right-arrow{cursor:pointer}.month-year .left-arrow{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);-o-transform:scaleX(-1);transform:scaleX(-1)}polyfill-next-selector{content:".days, .headings"}.days::after,.headings::after{clear:both;content:"";display:table}polyfill-next-selector{content:".day, .heading"}.heading,.day{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;box-sizing:border-box;float:left;overflow:visible;position:relative;display:block;width:26px;height:25px;margin-bottom:1px}polyfill-next-selector{content:".day span, .heading span"}.day span,.heading span{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;position:absolute;text-align:center;font-family:Arimo,sans-serif;font-size:11px;line-height:25px;width:25px;height:25px;top:0;left:0;z-index:1}polyfill-next-selector{content:".day"}.day.active{cursor:pointer}.day.fade{cursor:default;visibility:hidden}.day span{color:#003C71}.day.first::before,.day.last::before{content:"";position:absolute;width:29px;height:25px;top:0;z-index:1}.day.selected{background:#D5EEFA}.day.first.selected::before{background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2229px%22%20height%3D%2225px%22%20viewBox%3D%220%200%2029%2025%22%20enable-background%3D%22new%200%200%2029%2025%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20fill%3D%22%23a9d3f5%22%20points%3D%2226%2C0%2029%2C12.5%2026%2C25%200%2C25%200%2C0%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E");background-repeat:no-repeat;left:0}.day.last.selected::before{background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2229px%22%20height%3D%2225px%22%20viewBox%3D%220%200%2029%2025%22%20enable-background%3D%22new%200%200%2029%2025%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20fill%3D%22%23a9d3f5%22%20points%3D%2226%2C0%2029%2C12.5%2026%2C25%200%2C25%200%2C0%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E");background-repeat:no-repeat;-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);-o-transform:scaleX(-1);transform:scaleX(-1);left:-3px}.day.current{font-weight:700}.day.disabled{background:#f2f4f8;cursor:default}.day.disabled span{color:#CCC}.day.active:hover{background:#438eca}.day.active:hover span{color:#fff}.day.first.selected:hover::before{background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2229px%22%20height%3D%2225px%22%20viewBox%3D%220%200%2029%2025%22%20enable-background%3D%22new%200%200%2029%2025%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20fill%3D%22%23438eca%22%20points%3D%2226%2C0%2029%2C12.5%2026%2C25%200%2C25%200%2C0%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E");background-repeat:no-repeat;left:0}.day.last.selected:hover::before{background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2229px%22%20height%3D%2225px%22%20viewBox%3D%220%200%2029%2025%22%20enable-background%3D%22new%200%200%2029%2025%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20fill%3D%22%23438eca%22%20points%3D%2226%2C0%2029%2C12.5%2026%2C25%200%2C25%200%2C0%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E");background-repeat:no-repeat;-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);-o-transform:scaleX(-1);transform:scaleX(-1);left:-3px}.day.last.first.selected{background:#a9d3f5}.day.last.first.selected::before{background:0 0;left:0}polyfill-next-selector{content:".heading"}.heading span{color:#c2c2c2}</style><div class="month-year"><mm-icon class="left-arrow" type="cycle-arrow" on-click="{{decrMonth}}" width="13" height="13" hovercolor="[[ARROW_HOVER_COLOR]]"></mm-icon><mm-header class="header" size="small">{{month}} {{year}}</mm-header><mm-icon class="right-arrow" type="cycle-arrow" on-click="{{incrMonth}}" width="13" height="13" hovercolor="[[ARROW_HOVER_COLOR]]"></mm-icon></div><div class="calendar"><div class="headings"><template repeat="{{ header in headers }}"><div class="{{header.class}}"><span>{{header.label}}</span></div></template></div><div id="days" class="days" on-tap="{{handleTap}}"><template repeat="{{ day in days }}"><div id="day{{day.value}}" class="day {{day.class | tokenList}}"><span value="{{day.value}}">{{day.label}}</span></div></template></div></div></template><script>(function(){var _Day=function(moment,flags){this.moment=moment;this.class=flags};_Day.prototype={get value(){return this.moment.unix()},get label(){return this.moment.date()}};Polymer("mm-calendar",{ver:"<<version>>",headers:[{value:"S",label:"S","class":"heading"},{value:"M",label:"M","class":"heading"},{value:"T",label:"T","class":"heading"},{value:"W",label:"W","class":"heading"},{value:"T",label:"T","class":"heading"},{value:"F",label:"F","class":"heading"},{value:"S",label:"S","class":"heading"}],days:[],publish:{date:null,pairDate:null,viewDate:null,disablePast:false,disableFuture:false,useTapSelect:true},observe:{"viewDate pairDate disablePast disableFuture":"changeHandler",date:"dateChangeHandler"},ready:function(){this.viewDate=new Date;if(this.date){this.month=moment(this.date).month();this.year=moment(this.date).year();this.day=moment(this.date).date()}},incrMonth:function(e){this.viewDate=moment(this.viewDate).add(1,"month").toDate()},decrMonth:function(e){this.viewDate=moment(this.viewDate).subtract(1,"month").toDate()},updateSelection:function(){var end=this.pairDate?moment(this.pairDate):moment(this.date).add(1,"second");var selStart=moment.min(this.date,end);var selEnd=moment.max(this.date,end);if(selStart)selStart=moment(selStart).startOf("day");if(selEnd)selEnd=moment(selEnd).endOf("day");var selectedRange=moment().range(selStart,selEnd);this.days.forEach(function(day){day.class.selected=selectedRange.contains(day.moment);if(this.date&&this.pairDate){day.class.first=day.moment.isSame(selStart,"day")}if(this.pairDate&&this.date){day.class.last=day.moment.isSame(selEnd,"day")}if(!this.date&&this.pairDate){day.class.selected=day.moment.isSame(end,"day")}}.bind(this))},boundaryDate:function(value){if(typeof value==="boolean"){return moment().startOf("day")}else{var m=moment(value);if(m.isValid()){return m}return null}},updateMonthView:function(){var mm=moment(this.viewDate).startOf("day");this.month=moment.months(mm.month());this.year=mm.year();this.days=[];var preStart=mm.clone().date(1).startOf("week");var postEnd=preStart.clone().add(41,"day");var range=moment.range(preStart,postEnd);var disablePast=this.boundaryDate(this.disablePast);var disableFuture=this.boundaryDate(this.disableFuture);range.by("day",function(m){var disabled=this.disablePast&&m.isBefore(disablePast,"day")||this.disableFuture&&m.isAfter(disableFuture,"day");this.days.push(new _Day(m,{disabled:disabled,active:m.month()==mm.month()&&!disabled,fade:m.month()!==mm.month(),current:m.isSame(moment(),"day")&&m.isSame(moment(),"month")}))}.bind(this))},changeHandler:function(){this.updateMonthView();this.updateSelection()},dateChangeHandler:function(){var m=moment(this.date);if(m.isValid()){this.viewDate=m.toDate();this.changeHandler()}},handleTap:function(e){var state=!e.target.parentNode.classList.contains("disabled");var val=e.target.getAttribute("value");if(state&&val){this.fire("calendar-select",{date:moment.unix(val).toDate(),target:e.target,unix:val});if(this.useTapSelect){this.date=moment.unix(val).toDate();this.updateSelection()}}}})})();</script></polymer-element></body></html>