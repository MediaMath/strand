<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"></head><body><div hidden by-vulcanize=""><link rel="import" href="../../bower_components/polymer/polymer.html"><script>(function(a){a.Resolvable={ready:function(){this.hasAttribute('unresolved')&&this.removeAttribute('unresolved')}}})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){var b=a.MixinFindable={properties:{mixinFindable:{type:Object,value:function(){return this},notify:!0}},mixinsForValue:function(){return null;// override
},mixinsForValuePath:function(){return null;// override
},prototypeAsMixin:function(c){var d={};for(var e in Array.isArray(c.behaviors)&&0>c.behaviors.indexOf(b)?c.behaviors.push(b):!c.behaviors&&(c.behaviors=[b]),c)d[e]=c[e];return c.mixinsForValue=function(){return d},c}}})(window.StrandTraits=window.StrandTraits||{});</script><script>(function(a){a.TemplateFindable={properties:{_templateFound:{type:Object,computed:"_computeTemplate(templateFinder, templateFinder.template)"},templateFinder:{type:Object,notify:!0},templateFindable:{type:Object,value:function(){return this},notify:!0},templatePriority:{type:Array,value:function(){return["lightdom","import","bind"]},notify:!0},templateBind:{type:Object,value:null,notify:!0},templateMatch:{type:String,value:"template:not([is])",// use <template preserve-content></template> in certain cases
notify:!0},templateSelector:{type:String,value:"",notify:!0},templateUri:{type:String,notify:!0},templateQuery:{type:String,value:"template:not([is])",notify:!0}},ready:function(){this.notifyPath("templateFindable.templatePriority",this.templatePriority),this.notifyPath("templateFindable.templateBind",this.templateBind),this.notifyPath("templateFindable.templateMatch",this.templateMatch),this.notifyPath("templateFindable.templateSelector",this.templateSelector),this.notifyPath("templateFindable.templateUri",this.templateUri),this.notifyPath("templateFindable.templateQuery",this.templateQuery)},_computeTemplate:function(b,c){return c},_computeTemplateContents:function(b,c){return c},hasTemplate:function(){return 0|!!this._templateFound}}})(window.StrandTraits=window.StrandTraits||{});</script><link rel="import" href="../strand-item-recycler/strand-item-recycler.html"><link rel="import" href="../strand-grid-column/strand-grid-column.html"><link rel="import" href="../strand-grid-item/strand-grid-item.html"><link rel="import" href="../strand-checkbox/strand-checkbox.html"><link rel="import" href="../strand-icon/strand-icon.html"><link rel="import" href="../strand-loader/strand-loader.html"><script>(function(a){var b={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(c){return this.$[c]||this.$$('#'+c)}};a.Refable=b})(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="strand-grid"><template><style>.header-large,.header-medium,h1,h2{font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#333}:host ._mm_column{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 10px;vertical-align:middle;box-sizing:border-box;float:left;min-height:1px}:host ._mm_column.right{text-align:right}:host ._mm_column.checkbox,:host ._mm_column.toggle{box-sizing:content-box;margin:auto 0;padding:0 5px}:host ._mm_column.checkbox:first-of-type,:host ._mm_column.toggle:first-of-type{padding-left:15px}:host ._mm_column.checkbox{width:18px}:host ._mm_column.toggle{width:10px}:host ._mm_column.toggle strand-icon{cursor:pointer;transform:translateY(-1px) rotate(-90deg)}:host ._mm_column.toggle.expanded strand-icon{transform:translateY(-1px) rotate(0)}.header-large,h1{font-smoothing:antialiased;font-size:20px!important;line-height:25px!important;font-weight:700;font-style:normal}.header-medium,h2{font-smoothing:antialiased;font-size:15px!important;line-height:20px!important;font-weight:700;font-style:normal}.header-normal,.header-small,h3,h4{-webkit-font-smoothing:antialiased;font-style:normal;font-family:Arimo,sans-serif;-moz-osx-font-smoothing:grayscale;font-weight:700}.header-small,h3{font-smoothing:antialiased;font-size:13px!important;line-height:18px!important;color:#333}.header-normal,h4{font-smoothing:antialiased;font-size:11px!important;line-height:14px!important;color:#2E6C9E;text-transform:uppercase}.body-normal,.header-tiny,h5{-webkit-font-smoothing:antialiased}.header-tiny,h5{font-family:Arimo,sans-serif;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-size:9px!important;line-height:12px!important;font-weight:700;font-style:normal;color:#4C4C4C;text-transform:uppercase}.body-normal,.no-results-msg{font-family:Arimo,sans-serif;-moz-osx-font-smoothing:grayscale;font-weight:400;font-style:normal}.body-normal{font-smoothing:antialiased;font-size:13px!important;line-height:18px!important;color:#333}:host{display:block;position:relative;overflow:hidden;min-height:300px}:host([recycle=false]){min-height:0}:host([recycle=false]) #viewport{position:static}#footer,#header{display:-ms-flexbox;display:flex;min-width:100%;background:#e0e0e0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#header{top:0}#footer{bottom:0}#viewport{height:100%;width:100%;top:0;bottom:0;overflow:auto;background:#fff}#separator{display:none;transform:translateZ(0);position:absolute;top:0;height:100%;padding:0 50px;margin-left:-50px;cursor:col-resize}#separator:after{display:block;content:"";width:2px;height:100%;background-color:rgba(0,0,0,.3)}#separator.visible{display:block}#loader{width:130px;height:28px;margin:auto;position:relative}#columnContainer{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;width:100%}.no-results-msg{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);-webkit-font-smoothing:antialiased;font-smoothing:antialiased;font-size:15px!important;line-height:normal!important}</style><strand-item-recycler id="viewport" gpu="{{gpu}}" data="{{data}}" scope="{{scope}}" index="{{index}}" template-finder="{{templateFinder}}" template-findable="{{templateFindable}}" mixin-findable="{{mixinFindable}}" measuring="{{_measuring}}"><div id="header" recycler="header"><div class="_mm_column checkbox" hidden$="{{!selectable}}"><strand-checkbox id="selectAll" on-tap="_toggleAllSelections" state="{{_selectAllState}}"></strand-checkbox></div><div id="carat" class="_mm_column toggle" hidden$="{{!expandable}}"><strand-icon width="10" height="10" type="expand-all" on-tap="_toggleAllExpansions"></strand-icon></div><div id="columnContainer"><content id="columns" select="strand-grid-column"></content></div></div><strand-loader id="loader" recycler="overlay" style$="{{_loaderStyle}}"><label>Loading...</label></strand-loader><content select="template:not([is])"></content><template preserve-content=""><strand-grid-item model="{{model}}" scope="{{scope}}" index="{{index}}"></strand-grid-item></template><div recycler="footer"><content select="footer"></content></div></strand-item-recycler><template is="dom-if" if="{{_showNoResults(noResultsMessage, data)}}" restamp=""><div class="no-results-msg">{{noResultsMessage}}</div></template><div id="separator"></div></template></dom-module><script>(function(a){a.Grid=Polymer({is:'strand-grid',properties:{gpu:{type:String,value:'2d'},controller:Object,data:Array,scope:{type:Object,notify:!0,value:function(){return this}},index:{type:Number,notify:!0},_selectAllState:{type:String,value:'unchecked'},sortField:{type:String,notify:!0},sortOrder:{type:Number,value:1,notify:!0},indicate:{type:String,value:'loading measuring'},_indications:{type:Object,value:null,computed:'_computeIndications(indicate)'},_loaderStyle:{type:String,computed:'_styleLoader(_indications, isLoading, _measuring)'},isLoading:{type:Boolean,value:!1},_measuring:{type:Boolean},expanded:{type:Boolean,value:!1},selectable:{type:Boolean,value:!1,observer:'_selectableChanged'},expandable:{type:Boolean,value:!1,observer:'_expandableChanged'},_columns:{type:Array,value:function(){return[]},notify:!0},_columnCount:{type:Number,value:0,notify:!0},mutationTarget:{type:Object,value:function(){return this.$.columnContainer}},icon:{type:String,value:null,notify:!0},noResultsMessage:{type:String,value:null},_noResults:{type:Boolean,value:!1}},behaviors:[StrandTraits.Resolvable,StrandTraits.MixinFindable,StrandTraits.TemplateFindable,StrandTraits.Refable,StrandTraits.DomMutable],listeners:{'column-resize-start':'_onColumnResizeStart','column-resize':'_onColumnResize','column-resize-end':'_onColumnResizeEnd','column-sort':'_onColumnSort','item-selected':'_onItemSelected',added:'_initialize',removed:'_initialize',modified:'_initialize'},observers:['_expansionChanged(expanded)','_onSortChanged(sortField, sortOrder, _columnCount)'],_expansionChanged:function(b){this.toggleClass('expanded',!!b,this.$.carat)},attached:function(){this.async(this._initialize)},_initialize:function(){this._initializeColumns(),this._setInitialColumnWidth(),this._columnCount++},_initializeColumns:function(){var b=Polymer.dom(this.$.columns).getDistributedNodes();this._columns=Array.prototype.slice.call(b).map(function(c){return{node:c}}),this.notifyPath('scope._columns')},_selectableChanged:function(){this.notifyPath('scope.selectable',this.selectable)},_expandableChanged:function(){this.notifyPath('scope.expandable',this.expandable)},_setInitialColumnWidth:function(){var b=this._columns.every(function(f){return null===f.node.width||f.node.width===void 0});if(b){var c=100/this._columns.length;this._columns.forEach(function(f,g){f.node.width=c+'%',this.set('_columns.'+g+'.node.width',f.node.width)},this)}},////// Selection //////
_onItemSelected:function(b,c){var f=this.selected,g=c,h=Array.isArray(this.data)?this.data.indexOf(g):-1,j='unchecked';0<f.length&&(j='partial'),f.length===this.data.length&&(j='checked'),g&&-1<h&&this.set('data.'+h+'.selected',g.selected),this._selectAllState=j},_toggleAllSelections:function(b){this.setAllSelections(b.target.checked)},setAllSelections:function(b){var c=!!b;this._selectAllState=c?'checked':'unchecked',this.data&&this.data.forEach(function(f,g){this.set('data.'+g+'.selected',c)},this),this.fire('select-all',{selected:c})},get selected(){return this.data&&this.data.filter(function(b){return b.selected})},////// Resizing //////
_onColumnResizeStart:function(b){this._columnOffset=b.detail.val},_onColumnResize:function(b){var c=this._columnOffset+b.detail.val-this.$.viewport.getPaneScrollLeft();this.translate3d(c+'px',0,0,this.$.separator),this._showSeparator()},_showSeparator:function(){this.$.separator.classList.add('visible'),document.body.style.cursor='col-resize'},_hideSeparator:function(){this.$.separator.classList.remove('visible'),document.body.style.cursor=''},_onColumnResizeEnd:function(b){this._resizeColumns(b.detail.field,b.detail.val),this._hideSeparator()},_resizeColumns:function(){this._columns.map(function(b){var c=b.node.width;return c||(c=b.node.minWidth),-1!==c.indexOf('%')&&(c=b.node.offsetWidth+'px'),c},this).forEach(function(b,c){var f=this._columns[c];f.node.set('width',b),this.notifyPath('scope._columns.'+c+'.node.width',b)},this)},////// Sorting //////
_onSortChanged:function(){this.sortBy(this.sortField,this.sortOrder)},_onColumnSort:function(b){this.sortField=b.detail.field,this.sortOrder=b.detail.val},sortBy:function(b,c){var f=1<arguments.length?c:null;this._columns.forEach(function(g){g.node.sortOrder=g.node.SORT_DEFAULT,g.node.sortField===b&&(f===g.node.SORT_ASCENDING||f===g.node.SORT_DESCENDING?g.node.sortOrder=f:null===f&&(g.node.sortOrder=g.node.SORT_ASCENDING))})},////// Toggle //////
_toggleAllExpansions:function(){this.setAllExpansions(!this.expanded)},setAllExpansions:function(b){this.set('expanded',!!b),this.$.viewport.inferOffviewHeightsAfterNextMutation(),this.data&&this.data.forEach(function(c,f){this.set('data.'+f+'.expanded',this.expanded)},this)},_computeIndications:function(){var b=(this.indicate||'').split(/\s+/);return b.reduce(function(c,f){return c[f]=1,c},{})},_styleLoader:function(b,c,f,g,h){var j='',k=c&&b.loading?j:f&&b.measuring?j:g&&b.deferring?j:h&&b.initializing?j:'display: none;';return k},_showLoader:function(b,c,f){return c&&b.loading||f&&b.measuring},requestInitialization:function(){return this.$.viewport.initialize()},////// Util //////
createId:function(b,c){return b+c},getAllColumns:function(){return Array.apply(null,Polymer.dom(this).querySelectorAll('strand-grid-column'))},getColumnByField:function(b){return Polymer.dom(this).querySelector('strand-grid-column[field='+b+']')||null},insertBeforeColumn:function(b,c){return Polymer.dom(this).insertBefore(b,c)},removeColumn:function(b){return Polymer.dom(this).removeChild(b)},_showNoResults(b,c){return!!b&&(!c||c&&!c.length)}})})(window.Strand=window.Strand||{});</script></body></html>