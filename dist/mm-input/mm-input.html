<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt

--><html><head><link rel="import" href="../../../polymerLegacy/polymer.html"><link rel="import" href="../shared/fonts/fonts.html"><link rel="import" href="../shared/js/colors.html"><link rel="import" href="../mm-icon/mm-icon.html"><link rel="import" href="../mm-close-panel/mm-close-panel.html"><link rel="import" href="../mm-list/mm-list.html"><link rel="import" href="../mm-list-item/mm-list-item.html"><link rel="import" href="../shared/js/measure.html"></head><body><polymer-element name="mm-input" attributes="value overflow placeholder validation disabled search icon clear maxlength autocomplete width layout fitparent maxItems error data type size" constructor="MMInput" assetpath=""><template><style type="text/css">.button{font-weight:400;display:block;position:relative;padding-right:32px}.button label{pointer-events:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-transform:none;display:block;width:100%;font-weight:400}.button #caratIcon{padding:0 10px 0 13px;position:absolute;margin-top:-4px;top:50%;right:0;display:block}.button #caratIcon.closed{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);-o-transform:scaleY(1);transform:scaleY(1)}.button #caratIcon.opened{-webkit-transform:scaleY(-1);-moz-transform:scaleY(-1);-ms-transform:scaleY(-1);-o-transform:scaleY(-1);transform:scaleY(-1)}.button mm-icon{pointer-events:none}.button .left-items{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:start;-moz-justify-content:start;-ms-justify-content:start;-o-justify-content:start;justify-content:start;-ms-flex-pack:start;height:100%}.scroll-container{overflow-x:hidden;overflow-y:auto}:host([size=small]) .button{padding:0 26px 0 8px;height:26px}:host([size=small]) .button label{font-size:11px!important;line-height:24px!important}:host([size=small]) .button #caratIcon{padding:0 8px 0 10px}:host([size=small]) ::content>mm-list-item,:host([size=small]) mm-list-item{font-size:11px!important;line-height:13px!important}:host([skinless]) .button{border:none;background:initial;padding:0 20px 0 8px}:host([skinless]) .button label{font-weight:700!important}:host([skinless]) .button:hover,:host([skinless]) .button:active{background:initial;box-shadow:none}:host([skinless]) .button #caratIcon{padding:0 8px 0 4px}._mm_text_input{box-sizing:border-box;border:1px solid #CCC;border-radius:4px;background-color:#fff;box-shadow:inset 1px 1px 3px rgba(0,0,0,.125);width:100%;color:#333;font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-weight:400;font-size:13px!important;line-height:15px!important;padding:6px 10px;overflow:hidden;outline:0;margin:0;resize:none}._mm_text_input::-webkit-input-placeholder{font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-style:italic;font-weight:400}._mm_text_input::-moz-placeholder{font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-style:italic;font-weight:400}._mm_text_input:-moz-placeholder{font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-style:italic;font-weight:400}._mm_text_input:-ms-input-placeholder{font-family:Arimo,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;font-style:italic;font-weight:400}._mm_text_input.monospace{font-family:monospace}._mm_text_input.monospace::-webkit-input-placeholder{font-family:monospace}._mm_text_input.monospace::-moz-placeholder{font-family:monospace}._mm_text_input.monospace:-moz-placeholder{font-family:monospace}._mm_text_input.monospace:-ms-input-placeholder{font-family:monospace}._mm_text_input:focus,._mm_text_input[forceFocus]{border-color:#98cbf3;outline:0;box-shadow:0 0 6px rgba(171,210,246,.83)}._mm_text_input.invalid{border-color:#f85252}._mm_text_input.invalid:focus{border-color:#f85252;outline:0;box-shadow:0 0 6px rgba(171,210,246,.83)}:host{display:inline-block;vertical-align:middle;position:relative;font-size:0;line-height:0}:host([disabled]){pointer-events:none;opacity:.5}:host([fitparent]){width:100%}.icon-holder,.clear-btn{position:absolute;display:none;right:0}.clear-btn{cursor:pointer}._mm_text_input{height:29px;line-height:29px!important;padding:0 10px}._mm_text_input.opened.top{border-radius:0 0 4px 4px}._mm_text_input.opened.bottom{border-radius:4px 4px 0 0}:host([layout=hgroup-left]) ._mm_text_input{border-radius:4px 0 0 4px;border-right:none}:host([layout=hgroup-left]) ._mm_text_input.opened.bottom{border-radius:4px 0 0 0}:host([layout=hgroup-left]) ._mm_text_input.opened.top{border-radius:0 0 0 4px}:host([layout=hgroup-center]) ._mm_text_input{border-radius:0;border-left:none;border-right:none}:host([layout=hgroup-right]) ._mm_text_input{border-radius:0 4px 4px 0;border-left:none}:host([layout=hgroup-right]) ._mm_text_input.opened.bottom{border-radius:0 4px 0 0}:host([layout=hgroup-right]) ._mm_text_input.opened.top{border-radius:0 0 4px 0}:host([layout=dropdown]){display:block;border-bottom:1px solid #CCC}:host([layout=dropdown]) ._mm_text_input{border:none;box-shadow:none;border-radius:0}:host([layout=dropdown]) ._mm_text_input:focus{box-shadow:none}:host([size=large]) ._mm_text_input{height:46px!important;font-size:15px!important;line-height:46px!important;padding:0 15px!important}:host([size=large]) ._mm_text_input::placeholder{font-size:15px!important;line-height:46px!important}:host([size=large][search]) ._mm_text_input,:host([size=large][clear]) ._mm_text_input,:host([size=normal][icon]) ._mm_text_input{padding:0 30px 0 15px!important}:host([size=large][search]) .icon-holder,:host([size=large][search]) .clear-btn,:host([size=large][clear]) .icon-holder,:host([size=large][clear]) .clear-btn,:host([size=normal][icon]) .icon-holder,:host([size=normal][icon]) .clear-btn{width:16px;height:16px;top:15px;right:10px}:host([size=normal]) ._mm_text_input{height:29px!important;font-size:13px!important;line-height:29px!important;padding:0 10px!important}:host([size=normal]) ._mm_text_input::placeholder{font-size:13px!important;line-height:29px!important}:host([size=normal][search]) ._mm_text_input,:host([size=normal][clear]) ._mm_text_input,:host([size=normal][icon]) ._mm_text_input{padding:0 25px 0 10px!important}:host([size=normal][search]) .icon-holder,:host([size=normal][search]) .clear-btn,:host([size=normal][clear]) .icon-holder,:host([size=normal][clear]) .clear-btn,:host([size=normal][icon]) .icon-holder,:host([size=normal][icon]) .clear-btn{width:14px;height:14px;top:7.5px;right:8px}:host([size=small]) ._mm_text_input{height:26px!important;font-size:11px!important;line-height:26px!important;padding:0 8px!important}:host([size=small]) ._mm_text_input::placeholder{font-size:11px!important;line-height:26px!important}:host([size=small][search]) ._mm_text_input,:host([size=small][clear]) ._mm_text_input,:host([size=normal][icon]) ._mm_text_input{padding:0 22px 0 8px!important}:host([size=small][search]) .icon-holder,:host([size=small][search]) .clear-btn,:host([size=small][clear]) .icon-holder,:host([size=small][clear]) .clear-btn,:host([size=normal][icon]) .icon-holder,:host([size=normal][icon]) .clear-btn{width:11px;height:11px;top:7.5px;right:8px}</style><input id="input" type="{{type}}" class="_mm_text_input {{state}} {{ { bottom:$.closePanel.calcValign == 'BOTTOM', top:$.closePanel.calcValign == 'TOP', invalid:error == true } | tokenList }}" placeholder="{{placeholder}}" value="{{value}}" maxlength="{{maxlength}}" style="width:{{width | getWidth}};" disabled?="{{disabled}}"><span id="icon" class="icon-holder"><mm-icon type="{{icon}}" width="{{ size | iconSize }}" height="{{ size | iconSize }}" primarycolor="[[PRIMARY_ICON_COLOR]]"></mm-icon></span><span id="clearBtn" class="clear-btn" on-click="{{clearInput}}"><mm-icon type="fail" width="{{ size | iconSize }}" height="{{ size | iconSize }}" primarycolor="[[PRIMARY_ICON_COLOR]]"></mm-icon></span><template if="{{autocomplete}}"><mm-close-panel id="closePanel" fitparent="{{fitparent}}" target="{{$.input}}" offsety="-1" auto="true" mode="dropdown" state="{{state}}" scope="{{}}" class="{{ { bottom:$.closePanel.calcValign == 'BOTTOM', top:$.closePanel.calcValign == 'TOP' } | tokenList }}"><content id="search" select="mm-input"></content><div id="scrollContainer" class="scroll-container {{ { _mm_visible: overflow == 'visible', _mm_hidden: overflow == 'hidden' } | tokenList }}"><mm-list on-selected="{{onSelectItem}}" id="itemList"><template repeat="{{searchItems}}"><mm-list-item value="{{value}}">{{name}}</mm-list-item></template></mm-list></div></mm-close-panel></template></template><script>Polymer("mm-input",{ver:"<<version>>",STATE_OPENED:"opened",STATE_CLOSED:"closed",PRIMARY_ICON_COLOR:Colors.A18,searchItems:[],state:"closed",placeholder:"",validation:"none",overflow:"hidden",type:"text",icon:"search",search:false,clear:false,error:false,autoItemSelected:false,autocomplete:false,publish:{value:{value:"",reflect:true},disabled:{value:false,reflect:true},fitparent:{value:false,reflect:true},layout:{value:null,reflect:true},size:{value:"",reflect:true},data:[]},ready:function(){this.email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.alpha=/^\w+$/;this.inter=/^\d+$/;this.floater=/^\d*[.]\d+$/;if(!this.size.length)this.size="normal"},dataChanged:function(oldData,newData){if(typeof newData==="string"){try{this.data=JSON.parse(newData)}catch(e){this.data=newData}}},typeChanged:function(oldType,newType){var types=/(text|password|email|number|tel|search|url)/gi;if(!types.test(newType)){this.type="text"}},searchChanged:function(oldVal,newVal){if(this.icon==="search"&&newVal){this.$.icon.style.display="block"}},iconChanged:function(oldVal,newVal){if(this.icon!=="search"&&newVal){this.$.icon.style.display="block"}},valueChanged:function(oldVal,newVal){this.updateModel();this.fire("changed",{value:this.value});if(!this.autoItemSelected){this.validate();this.updateUI()}else{this.autoItemSelected=false}},inputWidthChanged:function(oldVal,newVal){if(this.$&&this.$.closePanel){if(this.autocomplete&&this.overflow==="visible"){this.$.closePanel.style.width="auto";this.$.closePanel.style.minWidth=newVal+"px"}else{this.$.closePanel.style.width=newVal+"px"}}},validate:function(){var valid=this.validator();if(valid){this.error=false}else{this.error=true}},validator:function(){switch(this.validation){case"empty":return this.value.length>0;case"int":return this.inter.test(this.value);case"decimal":return this.floater.test(this.value);case"email":return this.email.test(this.value);case"alpha":return this.alpha.test(this.value);case"blank":return this.value.trim().length>0;default:return true}},updateUI:function(){var dataFilter=function(a){return a.name.indexOf(this.value)!=-1};if(this.value&&this.value.length>0){if(this.clear){this.$.clearBtn.style.display="block"}if(this.icon==="search"&&this.search&&this.clear||this.icon&&this.clear){this.$.icon.style.display="none"}if(this.autocomplete){this.searchItems=this.data.filter(dataFilter.bind(this));if(this.searchItems.length>0){this.open()}}}else{if(this.clear){this.$.clearBtn.style.display="none"}if(this.icon==="search"&&this.search&&this.clear||this.icon&&this.clear){this.$.icon.style.display="block"}if(this.autocomplete){this.close()}}},bindModel:function(model,property){this.model=model;this.property=property},updateModel:function(){if(this.model&&this.property){if(this.model.set){var o={};o[this.property]=this.value;this.model.set(o)}else{this.model[this.property]=this.value}}},clearInput:function(e){this.value=""},get inputWidth(){if(this.$)return parseFloat(Measure.getComputedStyle(this.$.input).width)},open:function(e){this.state=this.STATE_OPENED},close:function(e){this.state=this.STATE_CLOSED},onSelectItem:function(e){this.autoItemSelected=true;this.value=e.detail.item.textContent.trim();this.close()},getWidth:function(value){if(value&&!this.fitparent){return value+"px"}else{return"100%"}},iconSize:function(size){switch(size){case"large":return 16;case"small":return 11;default:return 14}}});</script></polymer-element></body></html>