<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"><link rel="import" href="../../bower_components/polymer/polymer.html"></head><body><div hidden by-vulcanize=""><script>!function(n){function e(n,e){return Object.prototype.toString.call(n).toLowerCase()==="[object "+e.toLowerCase()+"]"}function r(n){return n?Array.prototype.slice.call(n):void 0}function t(n,e){return e?-1===e.indexOf(n.name):!0}function u(n,e,u){var a={},i=r(n.attributes);return i&&(i.forEach(function(n){if(t(n,e))try{a[n.name]=JSON.parse(n.value)}catch(r){""===n.value?a[n.name]=!0:a[n.name]=n.value}}),n.innerHTML&&u&&(a.inner=n.innerHTML)),a}function a(){var n={},e=r(arguments);return e.forEach(function(e){e.length>0&&i(e,n)}),o(n)}function i(n,e){if(0===n.length)return{};var r,t,u=e||{};for(r=n.length-1;r>=0;r--)t=n[r],u[t.name]=t.value;return u}function o(n){var e=[];for(var r in n)e.push({name:r,value:n[r]});return e}function c(){var n=r(arguments),t=n.length>1?n.shift():{};return n.reduce(function(n,r){if(e(r,"object"))for(var t in r)n[t]=r[t];return n},t)}function f(n,r){if(!r)return null;var t=n;return"string"==typeof n&&(t=n.split(".")),t.reduce(function(n,r){return e(n,"object")&&r in n?n[r]:null},r)}function l(n,e,r,t){if(e){var u=n;"string"==typeof n&&(u=n.split("."));var a=u.slice(-1)[0];u.reduce(function(n,e){return e===a?n[e]=r:t&&!n[e]&&(n[e]={}),n[e]},e)}}function s(n){return n.value||n.inner}function v(n){return{name:n.name,value:s(n)}}var d={clone:r,copy:c,isType:e,param:function(n,e){return{name:n,value:e}},packParams:i,unpackParams:o,uniqueMergeParams:a,objectifyDistributedNodes:function(n,e){function t(n){return n.nodeType===Node.ELEMENT_NODE}return n=r(n).filter(t),n.reduce(function a(n,e){var t=e.nodeName.toLowerCase();return void 0===n[t]&&(n[t]=[]),e.children.length>0?n[t]=r(e.children).reduce(a,{}):n[t].push(u(e,null,!0)),n},{})},nodeInnerValue:s,nodeToParam:v,mergeParamLists:function(){var n,e,t,u={},a=[],i=[],o=r(arguments);for(n=o.length-1;n>=0;n--)if(i=o[n],i&&i.length)for(e=i.length-1;e>=0;e--)t=i[e],t&&!u[t.name||t]&&(a.push(t),u[t.name||t]=!0);return a.reverse()},getPathValue:f,setPathValue:l};n.DataUtils=d}(window.StrandLib=window.StrandLib||{});</script><script>!function(t){function e(t,e){this.mode=e,this.key=t}t.DataUtils;e.prototype={save:function(t){this.value=t},load:function(){return this.value},hasKey:function(t){return null!==this.store.getItem(t||this.key)},clear:function(){this.value=null},clearAll:function(){this.storage.clear()},destroy:function(){window.removeEventListener("storage",this.handleStorage),delete this.mode,delete this.key},set:function(t,e){var n=this.value||{};Polymer.Base.set(t,e,n),this.value=n},get:function(t){return Polymer.Base.get(t,this.value)},get value(){var t=this.store.getItem(this.key);if(null===t)return null;try{return JSON.parse(t)}catch(e){return t}return t},set value(t){this.store.setItem(this.key,JSON.stringify(t))},get store(){return"session"===this.mode?sessionStorage:localStorage}},t.Storage=e}(window.StrandLib=window.StrandLib||{});</script><script>!function(n){var t={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(n){return this.$[n]}};n.Refable=t}(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="mm-localstore"><template><style>:host{display:none}</style></template></dom-module><script>!function(e){e.LocalStore=Polymer({is:"mm-localstore",behaviors:[StrandTraits.Refable],properties:{_storage:{type:Object,value:function(){return new StrandLib.Storage}},key:{type:String,value:"",observer:"_keyChanged"},value:{notify:!0,type:Object,value:function(){return null},observer:"_valueChanged"},auto:{type:Boolean,value:!0}},ready:function(){this.auto&&(this.value=this._storage.value),window.addEventListener("storage",this._handleWindowUpdate)},_handleWindowUpdate:function(){this.auto&&(this.value=this._storage.value)},save:function(e){this.value=e,this._storage.value=this.value},sync:function(){this.value?this.save(this.value):this.load()},load:function(){return this.value=this._storage.value,this.value},hasKey:function(e){return this._storage.hasKey(e)},_keyChanged:function(){this._storage.key=this.key},_valueChanged:function(){this.auto&&(this._storage.value=this.value)}})}(window.Strand=window.Strand||{});</script></body></html>