<!--
 * @license
 * Copyright (c) 2015 MediaMath Inc. All rights reserved.
 * This code may only be used under the BSD style license found at http://mediamath.github.io/strand/LICENSE.txt
 --><html><head><meta charset="UTF-8"><link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../mm-template-finder/mm-template-finder.html"></head><body><div hidden by-vulcanize=""><script language="javascript">!function(t){t.Snake=function(t){return t("","",t)}(function(t,i,e){function n(t,i,e){var n=(arguments.length,t||i||null);this._head=null,this._tail=null,this._count=0,this._leader=this,this.__guid=o++,this.body=null,n=n||this,this._connect(t||n,i||n,null),this._leader=n._validLeader()||e}function r(){return n}function a(t){this.push(0|t.__guid)}var o=1,l={},s=t||"",h=i||"",_="() { throw new Error('could not resolve Snake implementation body'); }",u=null,d=1;try{h||(h=e.toString(),s=h.slice(0,h.indexOf(")")),s=s.slice(s.indexOf("(")+1),h=h.slice(h.indexOf("{")+1),h=h.slice(0,h.lastIndexOf("}"))),u=Function(s,h)}catch(p){}return n.prototype.implementationFactory=function(){var t=(u||r)(s,h,_);return u&&(u=Function(s,h)),t},n.prototype.provide=function(t,i,e){return new n(t||null,i||t||null,e||null)},n.prototype.__breakpoint=function(t){d=0},n.prototype.__seq=function(t){var i=this._validLeader(),e=Array.isArray(t)?t:i?[]:null;return i&&i.eachTailwise(a,e),e},n.prototype.__log=function(){var t=this._validLeader(),i=t?[]:null;console.log(this.__guid,i,0|(t&&t.__guid)),console.log(this.__seq(i))},n.prototype.__tuple=function(){return[0|this.__guid,0|(this._head&&this._head.__guid),0|(this._tail&&this._tail.__guid),0|(this._leader&&this._leader.__guid)]},n.prototype._validLeader=function(){var t=this._leader,i=t&&t._head,e=t&&t._tail;return i&&e&&i._head===t&&e._tail===t?t:null},n.prototype.getLeader=function(){return this._validLeader()},n.prototype._isCoiled=function(){return 0|(this._head===this&&this._tail===this&&this._leader===this)},n.prototype._recoil=function(){this._head=this,this._tail=this,this._leader=this,this._count=0},n.prototype.setBody=function(t){return this.body=t,this},n.prototype.getHead=function(t){var i=0|t,e=this._head;if(e&&e._head!==this)for(;e&&i-- >0;)e=e.getHead(0);else if(this===e||this!==this._validLeader())e=null;else for(;e&&i-- >0;)e=e.getTail(0);return e},n.prototype.getTail=function(t){var i=0|t,e=this._tail;if(e&&e._tail!==this)for(;e&&i-- >0;)e=e.getTail(0);else if(this===e||this!==this._validLeader())e=null;else for(;e&&i-- >0;)e=e.getHead(0);return e},n.prototype.getCount=function(){var t=this._validLeader();return 0|(t&&t._count)},n.prototype._swap=function(){var t=this._head;return this._head=this._tail,this._tail=t,this},n.prototype.addHead=function(t){return t&&!t._isCoiled()?null:this._addSnake(this._head,this,t||null)},n.prototype.addTail=function(t){return t&&!t._isCoiled()?null:this._addSnake(this,this._tail,t||null)},n.prototype._addSnake=function(t,i,e){var r=this._validLeader(),a=r===i?i._swap():r===t?t._swap():null,o=e?e._connect(t,i,r):new n(t,i,r);return a?(this._inject(o,i,t),o._swap(),a._swap()):this._inject(o,t,i),r._count++,o},n.prototype._connect=function(t,i,e){return this._head=t,this._tail=i,this._leader=e||this._validLeader(),this},n.prototype._inject=function(t,i,e){e._head=t,i._tail=t},n.prototype.dropAnyway=function(t){for(var i=arguments.length?0|t:1,e=this;e&&i-- >0;)e=e._dropSnake(e._head,e._tail);return e},n.prototype.dropHeadwise=function(t){for(var i=arguments.length?0|t:1,e=this;e&&i-- >0;)e=e._dropSnake(e._head,null);return e},n.prototype.dropTailwise=function(t){for(var i=arguments.length?0|t:1,e=this;e&&i-- >0;)e=e._dropSnake(null,e._tail);return e},n.prototype._dropSnake=function(t,i){var e=this._validLeader(),n=t||i;return this!==e&&(this._eject(this,this._head,this._tail,e),e._count--),n!==this?n:null},n.prototype._eject=function(t,i,e,n){var r=n===e?e._swap():n===i?i._swap():null;i._tail=e,e._head=i,t&&t._recoil(),r&&r._swap()},n.prototype.eachHeadwise=function(t,i,e,n,r){var a=this._validLeader(),o=this===a?this.getTail():this;return this._each(this.getHead,a,o,t,i,e,n,r)},n.prototype.eachTailwise=function(t,i,e,n,r){var a=this._validLeader(),o=this===a?this.getHead():this;return this._each(this.getTail,a,o,t,i,e,n,r)},n.prototype._each=function(t,i,e,n,r,a,o,s){for(var h=e,_=0,u=r||this,d=0|this.getCount();h&&l!==n.call(u,h,_++,i,d,l,n,a,o,s);)h=t.call(h);return h},n})}(window);</script><script language="javascript">!function(t){function e(){var t=arguments.length,e=0,i=0;for(e;t>e;e++)i|=0|arguments[e];return i}function i(){var t=arguments.length,e=0,i=-1;for(e;t>e;e++)i&=0|arguments[e];return i}function n(t,e,i){this._elevation=0,this._height=0,this._bits=a,this.reset(+t||0,+e||0).rebit(0|i)}function r(){this._array=Array.apply(null,arguments)}function o(){var t=new r(_);return t.pop(),t}function s(t,e){var i="function"==typeof t,n="function"==typeof e;this._indexWithLazyExtent=0,this._items=(n?e:o)(),this._getInitialHeight=null,this._getInitialHeight=i?t:function(t,e){return 40}}function h(t){var e=_;return t>-1&&t<this._items.length()?e=this._items.get(t):-1>t&&(e=null),e&&t<this._indexWithLazyExtent&&e.knowsExtent()?e:null}var a=0,u=1,g=2,p=4;n.prototype._mutate=function(){if(i(this._bits,u))throw new Error("static Segments MUST NOT be modified")},n.prototype.reset=function(t,e){switch(this._mutate(),arguments.length){default:case 2:this._height=+e||0;case 1:this._elevation=+t||0;case 0:}return this},n.prototype.rebit=function(t,e){return this._mutate(),this._bits&=~(0|e),this._bits|=0|t,this},n.prototype.knowsHeight=function(){return i(this._bits,g)?1:0},n.prototype.knowsElevation=function(){return i(this._bits,p)?1:0},n.prototype.knowsExtent=function(){return this.knowsHeight()&&this.knowsElevation()},n.prototype.getExtent=function(){return this.knowsExtent()?this._elevation+this._height||0:-1},n.prototype.getHeight=function(){return this._height},n.prototype.getElevation=function(){return this._elevation},n.prototype.getBits=function(){return this._bits},r.prototype.pop=function(){return this._array.pop.apply(this._array,arguments)},r.prototype.push=function(){return this._array.push.apply(this._array,arguments)},r.prototype.length=function(){return this._array.length},r.prototype.get=function(t){return this._array[t]},r.prototype.set=function(t,e){return this._array[t]=e},r.prototype.useSlice=function(){this._array=this._array.slice.apply(this._array,arguments)};var _=new n(0,0,e(p,g)).rebit(u),l=new n(-1,-1,a).rebit(u);Snake.prototype.implementationFactory(),Snake.prototype.implementationFactory();s.prototype.getDiscreteCount=function(){return this._items.length()},s.prototype._segment=function(t){var e=_,i=_,r=t-1;return this._items.length()>t&&t>-1?(this._items.get(t)===l&&(t>0&&(i=this._items.get(r)),e=this._items.set(t,new n(0,0,a)),i.knowsExtent()&&e.reset(i.getExtent()).rebit(p)),1):0},s.prototype._fill=function(t){var e=this._items.length(),i=t+1,n=i-e;for(e;i>e;e++)this._items.push(l);return this._segment(t),n},s.prototype._lazyHeight=function(t,e){var i=+t.getHeight()||0;return t.knowsHeight()||(i=+this._getInitialHeight(e,this)||0,t.reset(t.getElevation(),i).rebit(g)),i},s.prototype._elevate=function(t,e){var i=_;e.knowsExtent()&&this._segment(t)&&(i=this._items.get(t),t===this._indexWithLazyExtent?(i.knowsHeight()&&this._boundEagerRange(t+1),i.reset(e.getExtent()).rebit(p)):i.knowsElevation()||i.reset(e.getExtent()).rebit(p))},s.prototype._boundEagerRange=function(t){this._indexWithLazyExtent=t},s.prototype._lowerBoundEagerRange=function(t){t<this._indexWithLazyExtent&&this._boundEagerRange(t)},s.prototype._makeLazy=function(t,e){this._lowerBoundEagerRange(t),this._elevate(t,e)},s.prototype._makeEager=function(t,e,i){var n=this._indexWithLazyExtent,r=t+e,o=this._items.length(),s=_,h=0,a=1;if(t>n&&(n=t,a=0),r>o&&(r=o),r>n&&(n>0&&(s=this._items.get(n-1)),s.knowsExtent())){for(h=+s.getExtent()||0,n;r>n;n++)if(this._segment(n),s=this._items.get(n),s.reset(h).rebit(p),s.knowsHeight())h+=+s.getHeight()||0;else{if(!i)break;h+=this._lazyHeight(s,n)}a&&this._boundEagerRange(n)}},s.prototype.adjustHeight=function(t,e){var i=+e||0,n=0|t,r=(this._fill(n),this._items.get(n)),o=i+this._lazyHeight(r,n);return i&&this.setHeight(n,o),o},s.prototype.setHeight=function(t,e){var i=+e||0,n=0|t,r=(this._fill(n),this._items.get(n)),o=i-this._lazyHeight(r,n),s=n+1;return r.reset(r.getElevation(),i).rebit(g),o&&this._makeLazy(s,r),o},s.prototype.getHeight=function(t){var e=0|t,i=(this._fill(e),this._items.get(e)),n=this._lazyHeight(i,e),r=e-1;return this._makeEager(r,3,0),n},s.prototype.getElevation=function(t){var e=0|t,i=e-1,n=(this._fill(i),h.call(this,i));return n||(n=0>i?_:this._items.get(i),this._makeEager(0,e,1)),this._elevate(e,n),+n.getExtent()||0},s.prototype.isElevationKnown=function(t){var e=0|t,i=e-1;return 0|!!h.call(this,i)},s.prototype.isHeightKnown=function(t){var e=0|t,i=e<this._items.length()?this._items.get(e):null;return 0|!(!i||!i.knowsHeight())},s.prototype.terminate=function(t){var e=0|t,i=this._items.length();return i>e?(this._items.useSlice(0,e),this._lowerBoundEagerRange(e),1):0|i===e},t.Continuum=s}(window);</script><script language="javascript">!function(t){function e(t,e,n,i){this._placement=0,this._dimension=0,this._paddingAbove=0,this._paddingBelow=0,this._orientation=0,this.reposition(+t||0),this.resize(+e||0),this.repad(+n||0,+i||0)}function n(t){this._innerIndex=0|t,this._outerIndex=-1}function i(t,e,n){var i="function"==typeof n,o="function"==typeof e;this._continuum=t||null,this._getFirstUnavailableIndex=null,this._getFirstUnavailableIndex=o?e:function(t){return-1},this._notifyIndex=null,this._notifyIndex=i?n:function(t,e,n,i){}}function o(t,e){this._index=0|t,this._range=0|e}function r(t,e){return new o(t,e)}function s(){this._handled=f.prototype.provide(),this._handled.addHead().body=r(0,0)}function a(t){return new n(t)}function u(){var t=a(0);this._placeholders=null,this._placeholders=new Snake(null,null),this._placeholders.addHead().body=t,this._available=_.prototype.provide()}function p(t){this._index=-1,this._height=0,this._delta=0,this._continuumInterface=null,this._continuumInterface=t}function h(t){return new Continuum(t)}function d(t,n,o,r){var s="function"==typeof r,a=this,d=(s?r:h)(function(e,n){return t.call(a,e,a)});this._fence=new e(0,0,0,0),this._continuumInterface=null,this._continuumInterface=new i(d,n,o),this._solver=new u,this._transactor=new p(this._continuumInterface),this._process()}function c(t,e,n){var i=this;i.adjustHeightAtIndex(e,n)}function l(t,e,n){var i=this;i.assignHeightAtIndex(e,n)}function g(t,e,n,i){var o=[],r=[],s=[],a=0;d.call(this,t,e,function(t,e,i,u){var p=o.length;if(0>i){for(;t>p;)o[p++]=-1;o[t]=a,r[a]=t,s[o[t]]=e,a++,n.call(this,o[t],e,i,u)}else 0>e?(a--,n.call(this,r[a],e,s[r[a]],u),n.call(this,o[t],s[r[a]],s[o[t]],u),o[t]=o[r[a]],o[r[a]]=-1,r[a]=-1):(s[o[t]]=e,n.call(this,o[t],e,i,u))},i)}e.prototype.isReversed=function(){return 0|!!this._orientation},e.prototype.flipOrientation=function(){var t=this._paddingAbove;return this._paddingAbove=this._paddingBelow,this._paddingBelow=t,this._orientation=0|!this._orientation},e.prototype.getAbove=function(){return this._paddingAbove},e.prototype.getBelow=function(){return this._paddingBelow},e.prototype.getPlacement=function(){return this._placement},e.prototype.getDimension=function(){return this._dimension},e.prototype.getLower=function(){return this._placement-this._paddingBelow},e.prototype.getUpper=function(){return this._placement+this._dimension+this._paddingAbove},e.prototype.reposition=function(t){return this.translate((+t||0)-(+this._placement||0))},e.prototype.translate=function(t){var e=+t||0;return e?(this._placement=(+this._placement||0)+e,0>e^this._orientation&&this.flipOrientation(),1):0},e.prototype.resize=function(t){var e=+t||0;return this._dimension!==e?(this._dimension=e,1):0},e.prototype.adjust=function(t){return this.resize((+this._dimension||0)+(+t||0))},e.prototype.repad=function(t,e){return 0|this._orientation?this._insolate(e,t):this._insolate(t,e)},e.prototype._insolate=function(t,e){var n=+t||0,i=+e||0,o=0;switch(arguments.length){default:case 2:o=o||this._paddingBelow!==i,this._paddingBelow=i;case 1:o=o||this._paddingAbove!==n,this._paddingAbove=n;case 0:}return 0|!!o},n.prototype.getInnerIndex=function(){return this._innerIndex},n.prototype.getOuterIndex=function(){return this._outerIndex},n.prototype.setOuterIndex=function(t){var e=this._outerIndex;return this._outerIndex=0|t,e},i.prototype.notify=function(t,e,n,i){this._notifyIndex.call(i,t,e,n,i)},i.prototype.getContinuum=function(){return this._continuum},i.prototype.trim=function(t){return this._continuum.terminate(t)},i.prototype.getIndexAtElevation=function(t,e,n){var i=this._continuum,o=0|i.getDiscreteCount(),r=+i.getElevation(o)||0;return t>r?this._getUnknownIndexAtElevation(t,i,o,e,n):this._getKnownIndexAtElevation(t,i,o,0,n)},i.prototype._getKnownIndexAtElevation=function(t,e,n,i,o){var r=0,s=0,a=i,u=n,p=n;for(p;p;p--)if(s=a+u>>1,r=+e.getElevation(s)||0,r>t)u=s;else{if(!(s>a))return o&&t===r?s-1:s;a=s}return-1},i.prototype._getUnknownIndexAtElevation=function(t,e,n,i,o){var r=0,s=1,a=n,u=a,p=u;do{if(u=p,p+=s,a=0|this._getFirstUnavailableIndex.call(null,p,u+1,i),a>-1&&p>a){if(p=a,!(p>u)){p=u,s=0;break}s=1}else s=s<<1>>>0;if(r=+e.getElevation(p)||0,!(t>r))break}while(s);return s?this._getKnownIndexAtElevation(t,e,p,u,o):-1},i.prototype.getDiscreteCount=function(){var t=this.getContinuum();return t.getDiscreteCount.apply(t,arguments)},i.prototype.setHeight=function(t,e){var n=this.getContinuum();return n.setHeight.apply(n,arguments)},i.prototype.getHeight=function(t){var e=this.getContinuum();return e.getHeight.apply(e,arguments)},i.prototype.getElevation=function(t){var e=this.getContinuum();return e.getElevation.apply(e,arguments)},i.prototype.isElevationKnown=function(t){var e=this.getContinuum();return e.isElevationKnown.apply(e,arguments)},i.prototype.isHeightKnown=function(t){var e=this.getContinuum();return e.isHeightKnown.apply(e,arguments)};var _=Snake.prototype.implementationFactory(),f=Snake.prototype.implementationFactory();o.prototype.getIndex=function(){return this._index},o.prototype.getRange=function(){return this._range},o.prototype.setRange=function(t){this._range=0|t},o.prototype.contains=function(t){var e=0|t;return 0|(e<this._index+this._range&&e>this._index-1)},o.prototype.begin=function(t){var e=0|t;return this.contains(e)?1:e===this._index-1?(this._index--,this._range++,1):0},o.prototype.end=function(t){var e=0|t;return this.contains(e)?1:e===this._index+this._range?(this._range++,1):0},s.prototype.untrackAll=function(){this._handled=f.prototype.provide(),this._handled.addHead().body=r(0,0)},s.prototype.track=function(t){var e=this._handled,n=this._greatestNotOverHandled(t,e),i=n?n.getTail(0):e.getHead(0);n&&n.body.end(t)?i&&i.body.begin(t)&&(n.body.setRange(i.body.getRange()+i.body.getIndex()-n.body.getIndex()),i.dropAnyway(1)):i&&i.body.begin(t)||(n?n.addTail().body=r(t,1):e.addHead().body=r(t,1))},s.prototype._greatestNotOverHandled=function(t,e){for(var n=e.getHead(0),i=n.body,o=i.getIndex(),r=i.getRange()+o,s=null;t>r&&(s=n,n=n.getTail(0));)i=n.body,o=i.getIndex(),r=i.getRange()+o;return s},s.prototype.wasTracked=function(t){var e=0|t,n=this._greatestNotOverHandled(e,this._handled);return 0|(n&&n.body.contains(e))},u.prototype.solve=function(t,e,n,i,o,r,s){var a=this._placeholders,u=this._available,p=1+r-o,h=n-o,d=i-r,c=d-h,l=0;!t&&0>c&&(l=c,c=0),h>0?d>0?c>0?(p>h?this._windUp(e,a,h,s):p&&this._jump(e,a,n,p,s),this._pushUp(e,a,c,u,s)):(0>c&&(this._cutUp(e,a,-c,u,s),p+=c),p>d?this._windUp(e,a,d,s):p&&this._jump(e,a,n+l,p,s)):0>c&&(this._cutUp(e,a,d,u,s),this._cutDown(e,a,-h,u,s)):0>d?c>0?(p>-d?this._windDown(e,a,-d,s):p&&this._jump(e,a,n,p,s),this._pushDown(e,a,c,u,s)):(0>c&&(this._cutDown(e,a,-c,u,s),p+=c),p>-h?this._windDown(e,a,-h,s):p&&this._jump(e,a,n,p,s)):c>0&&(this._pushUp(e,a,d,u,s),this._pushDown(e,a,-h,u,s))},u.prototype._claimAvailable=function(t,e){var n=e.getTail();return n?(n.dropAnyway(1),n.body):t.getCount()},u.prototype._abandonAvailable=function(t,e){e.addTail().body=t},u.prototype._cutUp=function(t,e,n,i,o){for(var r=0|n,s=0,a=e.getHead(0),u=a.body;r-- >0;)u=a.body,s=u.getInnerIndex(),a=a.dropTailwise(1),this._abandonAvailable(s,i),t.notify(s,-1,u.getOuterIndex(),o)},u.prototype._cutDown=function(t,e,n,i,o){for(var r=0|n,s=0,a=e.getTail(),u=a.body;r-- >0;)u=a.body,s=u.getInnerIndex(),a=a.dropHeadwise(1),this._abandonAvailable(s,i),t.notify(s,-1,u.getOuterIndex(),o)},u.prototype._pushUp=function(t,e,n,i,o){for(var r=null,s=e.getTail(),u=s?s.body.getOuterIndex():-1,p=0,h=0|n;h-- >0;)p=this._claimAvailable(e,i),r=a(p),r.setOuterIndex(++u),e.addTail().body=r,t.notify(p,u,-1,o)},u.prototype._pushDown=function(t,e,n,i,o){for(var r=null,s=e.getHead(0),u=s?s.body.getOuterIndex():-1,p=0,h=0|n;h-- >0;)p=this._claimAvailable(e,i),r=a(p),r.setOuterIndex(--u),e.addHead().body=r,t.notify(p,u,-1,o)},u.prototype._windUp=function(t,e,n,i){for(var o=null,r=e.getHead(0),s=e.getTail(),a=0,u=s.body.getOuterIndex(),p=0|n;p-- >0;)o=r.body,a=o.getOuterIndex(),o.setOuterIndex(++u),s=r.dropTailwise(1),e.addTail(r),r=s,t.notify(o.getInnerIndex(),u,a,i)},u.prototype._windDown=function(t,e,n,i){for(var o=null,r=e.getTail(),s=e.getHead(0),a=0,u=s.body.getOuterIndex(),p=0|n;p-- >0;)o=r.body,a=o.getOuterIndex(),o.setOuterIndex(--u),s=r.dropHeadwise(1),e.addHead(r),r=s,t.notify(o.getInnerIndex(),u,a,i)},u.prototype._jump=function(t,e,n,i,o){var r=e.getHead(0),s=r.body,a=s.getOuterIndex(),u=0|n,p=0|i;s.setOuterIndex(n),r.dropTailwise(1),e.addTail(r),t.notify(s.getInnerIndex(),u,a,o),this._windUp(t,e,p-1,o)},u.prototype.getLowestIndex=function(){var t=this._placeholders.getHead(0);return t?t.body.getOuterIndex():-1},u.prototype.getHighestIndex=function(){var t=this._placeholders.getTail();return t?t.body.getOuterIndex():-2},u.prototype.propagateHeightChangeAtIndex=function(t,e,n){for(var i=0|t,o=this._placeholders.getHead(0),r=0;o&&i>o.body.getOuterIndex();)o=o.getTail();for(;o;)r=o.body.getOuterIndex(),e.notify(o.body.getInnerIndex(),r,r,n),o=o.getTail()},p.prototype.getHeight=function(){return this._height},p.prototype.setHeight=function(t){this._height=t},p.prototype.getDelta=function(){return this._delta},p.prototype.setDelta=function(t){this._delta=t},p.prototype.getCandidate=function(){return this._index},p.prototype.resetCandidate=function(){this._index=-1},p.prototype._considerCandidate=function(t,e){e&&(this._index<0||this._index>t)&&(this._index=t)},p.prototype.assignHeightAtIndex=function(t,e){var n=this._continuumInterface,i=n.setHeight.apply(n,arguments);this.setHeight(+e||0),this.setDelta(+i||0),this._considerCandidate(0|t,+i||0)},p.prototype.adjustHeightAtIndex=function(t,e){var n=this._continuumInterface,i=n.adjustHeight.apply(n,arguments);this.setHeight(+i||0),this.setDelta(+e||0),this._considerCandidate(0|t,+e||0)};var y=0,v=1;d.prototype.cull=function(){this._process(v)},d.prototype.truncate=function(t){var e=this._continuumInterface,n=0|e.getDiscreteCount(),i=0|t,o=0|n>i,r=!0;return(!arguments.length||0>i)&&(i=1+e.getIndexAtElevation(this.getFrameUpperBound(),this,0|r),o=0|n>i),o?(this._migrate(i),e.trim(i),1):0},d.prototype._migrate=function(t){var e=this._fence,n=this._continuumInterface,i=this.getLowestIndex(),o=this.getHighestIndex(),r=1+o,s=r-i,a=t-s,u=a-1,p=this._solver,h=0,d=0,c=0,l=0;if(0>a)a=0,u=t-1,t&&(l=n.getElevation(t),d=e.getAbove(),l-=d,0>l?(d+=l,l=0):(c=e.getBelow(),l-=c,0>l?(c+=l,l=0):h=l)),e.reposition(0),e.resize(h),e.repad(d,c);else{if(!(r>t))return 0;u=s-1,e.reposition(n.getElevation(a)+e.getBelow())}return p.solve(v,n,a,u,i,o,this),1},d.prototype.getLowestIndex=function(){return this._solver.getLowestIndex()},d.prototype.getHighestIndex=function(){return this._solver.getHighestIndex()},d.prototype.transactHeightMutations=function(t,e,n,i){var o=this._transactor,r=-1;o.resetCandidate(),t.apply(o,arguments),r=o.getCandidate(),r>-1&&(this._solver.propagateHeightChangeAtIndex(r,this._continuumInterface,this),this._process(y))},d.prototype.adjustHeightAtIndex=function(t,e){return this.transactHeightMutations(c,t,e),this._transactor.getHeight()},d.prototype.setHeightAtIndex=function(t,e){return this.transactHeightMutations(l,t,e),this._transactor.getDelta()},d.prototype.getHeightAtIndex=function(t){return this._continuumInterface.getHeight.apply(this._continuumInterface,arguments)},d.prototype.getElevationAtIndex=function(t){return this._continuumInterface.getElevation.apply(this._continuumInterface,arguments)},d.prototype.isElevationKnownAtIndex=function(t){return this._continuumInterface.isElevationKnown.apply(this._continuumInterface,arguments)},d.prototype.isHeightKnownAtIndex=function(t){return this._continuumInterface.isHeightKnown.apply(this._continuumInterface,arguments)},d.prototype.getConcreteCount=function(){return this._continuumInterface.getDiscreteCount()},d.prototype.getFramePlacement=function(){return this._fence.getPlacement()},d.prototype.getFrameDimension=function(){return this._fence.getDimension()},d.prototype.getFrameLowerBound=function(){return this._fence.getLower()},d.prototype.getFrameUpperBound=function(){return this._fence.getUpper()},d.prototype.repositionFrame=function(t){return this._fence.reposition.apply(this._fence,arguments)&&this._process(y),this},d.prototype.translateFrame=function(t){return this._fence.translate.apply(this._fence,arguments)&&this._process(y),this},d.prototype.resizeFrame=function(t){return this._fence.resize.apply(this._fence,arguments)&&this._process(y),this},d.prototype.adjustFrame=function(t){return this._fence.adjust.apply(this._fence,arguments)&&this._process(y),this},d.prototype.repadFrame=function(t,e){return this._fence.repad.apply(this._fence,arguments)&&this._process(y),this},d.prototype.setFrame=function(t,e,n,i){var o=this._fence,r=0;return r=o.reposition(t)||r,r=o.resize(e)||r,r=o.repad(n,i)||r,r&&this._process(y),this},d.prototype._process=function(t){var e=this._fence,n=this._continuumInterface,i=+e.getLower()||0,o=+e.getUpper()||0,r=!0,s=0|n.getIndexAtElevation(i,this,0|!r),a=0|n.getIndexAtElevation(o,this,0|r),u=this.getLowestIndex(),p=this.getHighestIndex(),h=this._solver,d=0;return 0>s&&0>a&&(d=n.getElevation(n.getDiscreteCount()),i>d?(i-=o-d,o=d,d=-1):0>o&&(o-=i,i=0,d=-1),0>d&&(s=0|n.getIndexAtElevation(i,this,0|!r),a=0|n.getIndexAtElevation(o,this,0|r))),0>s&&(s=0),0>a&&(a=-1+(0|n.getDiscreteCount())),h.solve(t,n,s,a,u,p,this)},g.prototype=new d(function(t){return 44},function(t){return-1},function(t,e,n,i){},null),g.prototype.SparseRecycler=d,t.Recycler=g}(window);</script><script>!function(t){var e={ready:function(){this.hasAttribute("unresolved")&&this.removeAttribute("unresolved")}};t.Resolvable=e}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(t){t.TemplateFindable={properties:{_templateFound:{type:Object,computed:"_computeTemplate(templateFinder, templateFinder.template)"},templateFinder:{type:Object,notify:!0},templateFindable:{type:Object,value:function(){return this},notify:!0},templatePriority:{type:Array,value:function(){return["lightdom","import","bind"]},notify:!0},templateBind:{type:Object,value:null,notify:!0},templateMatch:{type:String,value:"template:not([is])",notify:!0},templateSelector:{type:String,value:"",notify:!0},templateUri:{type:String,notify:!0},templateQuery:{type:String,value:"template:not([is])",notify:!0}},ready:function(){this.notifyPath("templateFindable.templatePriority",this.templatePriority),this.notifyPath("templateFindable.templateBind",this.templateBind),this.notifyPath("templateFindable.templateMatch",this.templateMatch),this.notifyPath("templateFindable.templateSelector",this.templateSelector),this.notifyPath("templateFindable.templateUri",this.templateUri),this.notifyPath("templateFindable.templateQuery",this.templateQuery)},_computeTemplate:function(t,e){return e},_computeTemplateContents:function(t,e){return e},hasTemplate:function(){return 0|!!this._templateFound}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){var t={properties:{ref:{type:Object,notify:!0,readOnly:!0,value:function(){return this}}},findById:function(n){return this.$[n]}};n.Refable=t}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(e){function t(e){var t=-1,n=-1,o="";return e&&(t=s.indexOf(e),0>t?(t=-1+s.push(e),o=e.innerHTML,n=i.indexOf(o),0>n&&(n=-1+i.push(o),l.push(r(o,n))),c.push(n)):n=c[t]),0>n?null:l[n]}function n(){var e="";do e=a();while(o[e]);return o[e]=1,e}function r(e,t){function r(e,t){var n=this[t];n&&n.innerHTML!==e.innerHTML&&(e.innerHTML=n.innerHTML)}function o(e){var t=e.querySelectorAll("style:not([is])"),n=t.length,r=0;for(r;n>r;r++)l(t[r])}function l(e){var t=Polymer.StyleUtil.rulesForStyle(e),n=1;t.rules=t.rules.reduce(function(e,t){var n=t.selector,r=n.indexOf(":host"),o=n.indexOf("::content");return 0>r?(t.selector=":host ::content "+t.selector,e.push(t)):o>r&&(t.selector=n.slice(o+"::content".length),e.push(t)),e},[]),Polymer.StyleUtil.clearStyleRules(e),e.textContent+="\n\n"+Polymer.StyleUtil.toCssText(t,null,0|n)}function i(){if(!this[u]._childNodes){var e=Polymer.dom(this),t=Polymer.dom(this.root),n=t.querySelector("content#"+a),r=t.querySelectorAll("style:not([is])"),o=r.length,l=0;for(t.appendChild(n),l;o>l;l++)t.appendChild(r[l]);var i=Array.apply(null,t.childNodes);for(o=i.length,l=0;o>l&&i[l]!==n;l++);for(i=i.slice(0,l),o=i.length,l=0;o>l;l++)e.appendChild(i[l]);this[u]._childNodes=i}}function s(){if(Polymer.Settings.useNativeShadow)return 1;if(this[u]._correctedStyleScopes)return 1;var e=Polymer.dom(this),t=e.getOwnerRoot(),n=t&&t.host||null;if(!n){if(n=e.parentNode,!n)return 0;Polymer.StyleTransformer.dom(this,n.is)}var r=e.querySelectorAll("*"),o=r.length,l=0;for(l;o>l;l++)Polymer.StyleTransformer.dom(r[l],this.is,void 0,!0),Polymer.StyleTransformer.dom(r[l],n.is);return this[u]._correctedStyleScopes=1}var c=n(),a="mm-gen-comp-n"+t+"-x"+c.split("-").join(""),u="__mmgencompn"+t+"x"+c.slice(0,8),d=document.createElement("dom-module"),h=document.createElement("template");h.innerHTML=e+'<content id="'+a+'"></content>',o(h.content);var m=0,p=m?Array.apply(null,h.content.querySelectorAll("template:not([is])")):null;return d.appendChild(h),d.register(a),Polymer({is:a,"extends":"div",behaviors:[StrandTraits.Refable],properties:function(){var e={model:{type:Object,notify:!0},scope:{type:Object,notify:!0}};return e[u]={type:Object,readOnly:!0,value:function(){var e={};return e._childNodes=null,e._correctedStyleScopes=0,e}},e}(),instanceTemplate:function(e){var t=CustomElements.useNative?document.importNode(e.content,!0):document.adoptNode(e.content.cloneNode(!0));return p&&Array.apply(null,t.querySelectorAll("template:not([is])")).forEach(r,p),t},attached:function(){this.preferLightDom&&i.call(this),this[u]._childNodes&&this.async(s,0)},ready:function(){this.preferLightDom&&i.call(this)},useLightDom:function(){this.preferLightDom=!0,i.call(this),this.async(s,0)}})}var o=Object.create(null),l=[],i=[],s=[],c=[],a=function u(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,u)};e.TemplateComponentizable={instantiateTemplate:function(e,n){var r=e&&t(e)||null,o=r?new r:null;return n&&o&&o.useLightDom(),o}}}(window.StrandTraits=window.StrandTraits||{});</script><script type="text/javascript">!function(e){function i(e){if(e.__resizeTriggers__){var i=e.__resizeTriggers__,t=i.firstElementChild,r=i.lastElementChild,s=t.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,s.style.width=t.offsetWidth+1+"px",s.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(e){var r=this;i(this),this.__resizeRAF__&&_(this.__resizeRAF__),this.__resizeRAF__=n(function(){t(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach(function(i){i.call(r,e)}))})}var s=document.attachEvent;if(!s){var n=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(i){return e(i)}}(),_=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(i){return e(i)}}(),o=!1,a="animation",l="",m="animationstart",d="Webkit Moz O ms".split(" "),c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h="",f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(o=!0),o===!1)for(var g=0;g<d.length;g++)if(void 0!==f.style[d[g]+"AnimationName"]){h=d[g],a=h+"Animation",l="-"+h.toLowerCase()+"-",m=c[g],o=!0;break}var z="resizeanim"}e.SizeResponsible={properties:{_alias:{type:Object,value:function(){return this}}},addResizeListener:function(e,t){var n=t||this,_=" "+this.tagName.toLocaleLowerCase()+" ";s?n.attachEvent("onresize",e):(n.__resizeTriggers__||("static"==getComputedStyle(n).position&&(n.style.position="relative"),n.__resizeLast__={},n.__resizeListeners__=[],n.__resizeTriggers__=document.createElement("div"),n.__resizeTriggers__.className="resize-triggers"+_,n.__resizeTriggers__.innerHTML='<div class="expand-trigger'+_+'"><div></div></div><div class="contract-trigger'+_+'"></div>',Polymer.dom(n).appendChild(n.__resizeTriggers__),Polymer.dom.flush(),i(n),n.addEventListener("scroll",r,!0),m&&n.__resizeTriggers__.addEventListener(m,function(e){e.animationName==z&&i(n)})),n.__resizeListeners__.push(e))},removeResizeListener:function(e,i){var t=i||this;s?t.detachEvent("onresize",e):t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",r),t.__resizeTriggers__=!Polymer.dom(t).removeChild(t.__resizeTriggers__)))}}}(window.StrandTraits=window.StrandTraits||{});</script><script>!function(n){function i(n){r.push(n)}function t(n){r.splice(r.indexOf(n),1)}function e(){var n;for(n=r.length-1;n>=0;n--)r[n].resize&&r[n].resize()}function o(n){var i;for(i=r.length-1;i>=0;i--)r[i].scroll&&r[i].scroll()}var r=[];window.addEventListener("resize",e),window.addEventListener("scroll",o,!0),n.WindowNotifier={attached:function(){i(this)},detached:function(){t(this)},resize:function(){},scroll:function(){}}}(window.StrandTraits=window.StrandTraits||{});</script></div><dom-module id="mm-item-recycler"><template><style>@-webkit-keyframes resizeanim{from,to{opacity:0}}@keyframes resizeanim{from,to{opacity:0}}.resize-triggers{-webkit-animation:1ms resizeanim;animation:1ms resizeanim;visibility:hidden;opacity:0}.contract-trigger:before,.resize-triggers,.resize-triggers>div{content:" ";display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-triggers>div{background:#eee}.contract-trigger:before{width:200%;height:200%}:host{display:block;overflow:auto}:host([x-scroll=none]) #constrainer{max-width:100%}#pane{width:100%;height:100%;overflow-x:inherit;overflow-y:inherit;max-height:inherit}#constrainer{display:inline-block}#constrainer,#extent,#footer,#header,#middle{min-width:100%;position:relative}#extent{height:1px;margin-top:-1px;z-index:-1}</style><mm-template-finder template-finder="{{templateFinder}}" template-findable="{{templateFindable}}"><content select="template:not([is])"></content></mm-template-finder><div id="pane"><div id="constrainer"><div id="middle"></div><div id="header"><content select=":not([recycler=footer])"></content></div><div id="footer"><content select="[recycler=footer]"></content></div><div id="extent"></div></div></div></template></dom-module><script>!function(e){function t(e,t){this.itemRecycler=e,this.id=t,this.young=-1,this.height=0,this.offset=0,this.location=0,this.instance=null,this.element=null,this.value=null,this.pendingResponse=0}function i(){this.model=null,this.scope=null}function n(e){this.scroll=null,this.pane=null,this.header=null,this.footer=null,this.boundMap={}}function s(e){return e.getBoundingClientRect().height}function r(e){return e}window.addEventListener("mousewheel",Function()),t.prototype=Object.create(null),i.prototype=Object.create(null),Polymer({is:"mm-item-recycler",behaviors:[StrandTraits.Resolvable,StrandTraits.WindowNotifier,StrandTraits.TemplateFindable,StrandTraits.TemplateComponentizable,StrandTraits.SizeResponsible,StrandTraits.Refable],properties:{gpu:{type:String,value:"2d"},_gpuAssignedOnce:String,xScroll:{type:String,value:"all",reflectToAttribute:!0},scope:{type:Object,value:null,notify:!0},index:{type:Number,value:0,notify:!0},_desiredIndex:{type:Number,value:-1},_bindingList:{type:Array,value:function(){return[]}},_waiting:{type:Boolean,value:!1},_initialized:{type:Boolean,value:!1},_initializable:{type:Boolean,value:!1},_itemHeight:{type:Number,value:0},_transformBaseline:{type:Number,value:0},_headerHeight:{type:Number,value:0},_footerHeight:{type:Number,value:0},_middleHeight:{type:Number,value:0},_extentHeight:{type:Number,value:0},_viewportHeight:{type:Number,value:0},_scrollTop:{type:Number,value:0},_maxPixels:{type:Number,value:1<<24},_responders:{type:Object,value:function(){var e=new n(this);return e.scroll=this._scrollHandler.bind(this),e.pane=this._paneResponse.bind(this),e.header=this._headerResponse.bind(this),e.footer=this._footerResponse.bind(this),e.extent=this._extentResponse.bind(this),e}},_recycler:{type:Object,value:function(){return new Recycler(this._getItemHeight.bind(this),this._getQueriableLength.bind(this),this._handleRecycling.bind(this))}},_measurements:{type:Object,value:function(){return new Continuum(this._getItemHeight.bind(this))}},data:{type:Array,value:null,notify:!0}},observers:["_needsInitialization(data, _templateFound)","_scopeChanged(scope.*)","_dataChanged(data.*)"],_dataChanged:function(e){var t="data.",i=t.length,n=e.path,s=0===n.indexOf(t),r=n.indexOf(".",i),o=0,h=this._bindingList,l=0|(h&&h.length),a=0,d=null;if(s&&r>i&&(n.charCodeAt(i)==="#".charCodeAt(0)&&(i+=1),o=Number(n.slice(i,r)),!isNaN(o)))for(a;l>a;a++)d=h[a],d&&d.young===o&&d.instance.notifyPath("model."+e.path.slice(r+1),e.value)},_scopeChanged:function(e){var t=this._bindingList,i=0|(t&&t.length),n=0,s=null;for(n=0;i>n;n++)s=t[n],s&&s.instance.notifyPath(e.path,e.value)},attached:function(){this.$.pane.addEventListener("scroll",this._responders.scroll,!0),this.addResizeListener(this._responders.pane,this.$.pane),this.addResizeListener(this._responders.header,this.$.header),this.addResizeListener(this._responders.footer,this.$.footer),this.addResizeListener(this._responders.extent,this.$.extent)},detached:function(){this.$.pane.removeEventListener("scroll",this._responders.scroll),this.removeResizeListener(this._responders.pane,this.$.pane),this.removeResizeListener(this._responders.header,this.$.header),this.removeResizeListener(this._responders.footer,this.$.footer),this.removeResizeListener(this._responders.extent,this.$.extent)},_settleDown:function(){this.fire("presentation-settled")},_extentResponse:function(e){this._waiting&&s(this.$.extent)>0&&(this._waiting=!1,this.initialize())},_paneResponse:function(e){var t=this,i=+(s(t.$.pane)-t._viewportHeight)||0;i-=this._headerHeight+this._footerHeight,i&&(t._viewportHeight+=i,t._initialized&&t._recycler.resizeFrame(t._viewportHeight),t._repositionFooter(),t.debounce("settle-down",t._settleDown,1))},_headerResponse:function(e){var t=this,i=+(s(t.$.header)-t._headerHeight)||0;i&&(t._headerHeight+=i,t._viewportHeight-=i,t._initialized&&t._recycler.resizeFrame(t._viewportHeight),t._repositionMiddle(),t._repositionFooter(),t.debounce("settle-down",t._settleDown,1))},_footerResponse:function(e){var t=this,i=+(s(t.$.footer)-t._footerHeight)||0;i&&(t._footerHeight+=i,t._viewportHeight-=i,t._initialized&&t._recycler.resizeFrame(t._viewportHeight),t._repositionFooter(),t.debounce("settle-down",t._settleDown,1))},_boundResponse:function(e){var t=this,i=t.height,n=+(s(t.element)-i)||0,r=t.itemRecycler,o=0,h=!0;t.height+=n,r._measurements.setHeight(t.young,t.height),n?(t.height&&(r._itemHeight?r._itemHeight<0&&(o=r._accommodateGlobalHeightAdjustment(0|!h,t,n),r.async(r._modifyPadding,1)):(o=r._accommodateGlobalHeightAdjustment(0|h,t,n),r.async(r._modifyPadding,1),r._desiredIndex>-1&&r.async(r.scrollToIndex))),r._changeOffsetsAfter(t,n),r._deltaMiddleHeight(r._recycler.setHeightAtIndex(t.young,t.height)),r._repositionHeader(),r._repositionFooter(),n+o&&r._paneResponse(null),r.debounce("settle-down",r._settleDown,1)):t.pendingResponse&&r.debounce("settle-down",r._settleDown,1),r._itemHeight<0&&(r._itemHeight=-r._itemHeight),t.pendingResponse=0},_accommodateGlobalHeightAdjustment:function(e,t,i){var n=r(t.height+this._itemHeight),s=0;return this._itemHeight=r(t.height),e?(s=(this._getDataLength()-1)*n,this._deltaMiddleHeight(s)):(this._measurements.terminate(0),s=this._getDataLength()*t.height-i-this._middleHeight,this._deltaMiddleHeight(s),this._recycler.transactHeightMutations(this._reinitTxn,this,t)),s},_reinitTxn:function(e,t,i){var n=this,s=t._getDataLength(),r=0;for(r=0;s>r;r++)r!==i.young&&n.assignHeightAtIndex(r,t._itemHeight)},_modifyPadding:function(){var e=this._bindingList,t=0|(e&&e.length),i=0,n=null,s=0;for(i=0;t>i;i++)n=e[i],n&&n.offset!==s&&(n.offset=s,this._repositionBound(n)),s+=n.height;this._itemHeight>0&&this._recycler.repadFrame(r(this._itemHeight),r(this._itemHeight))},_changeOffsetsAfter:function(e,t){var i=this._bindingList,n=0|(t&&i&&i.length),s=0,r=null;for(s=1+(0|e.id);n>s;s++)r=i[s],r&&(r.offset+=t,this._repositionBound(r))},_needsInitialization:function(e,t){this._initializable=!1,this._initialized=!1,this.initialize()},initialize:function(){return this.data&&this.hasTemplate()?s(this.$.extent)<1?(this._waiting=!0,0):(this._waiting=!1,this.debounce("initializeRecycler",this.initializeRecycler),1):0},initializeRecycler:function(){return this._initializable?0:(this._recycler.truncate(0)&&(this._scrollTop=0,this.$.pane.scrollTop=0,this._itemHeight=0),this._recycler.setFrame(0,0,0,0),this._measurements.terminate(0),this._initializeViewport(),this._initializable=!0,this._initialized=!0,this._waiting=!1,1)},_initializeViewport:function(){var e=s(this.$.pane);this._headerHeight=s(this.$.header),this._footerHeight=s(this.$.footer),this._extentHeight=s(this.$.extent),e-=this._headerHeight+this._footerHeight,this._viewportHeight=e,this._assignMiddleHeight(this._viewportHeight||1),this._repositionHeader(),this._repositionFooter(),this._repositionMiddle(),this._repositionExtent();var t=r(this._itemHeight);this._recycler.setFrame(0,this._middleHeight,t,t),this._desiredIndex<0&&(this._desiredIndex=0|this.index)},scrollToIndex:function(e,t){var i=+t||0,n=0|(arguments.length?e:this._desiredIndex),s=0|(this.data&&this.data.length),r=0,o=0,h=0;return this._desiredIndex=-1,n>-1&&s>n&&n<this._getDataLength()?(o=this._recycler.getElevationAtIndex(n),0>i||!i&&this._scrollTop>=o?(this.$.pane.scrollTop=o,h=this._scrollTop-o):(r=this._recycler.getElevationAtIndex(n+1),(i>0||this._scrollTop<r-this._viewportHeight)&&(this.$.pane.scrollTop=r-this._viewportHeight,h=this._scrollTop-(r-this._viewportHeight))),h&&(this._desiredIndex=n),1):0},_determineIndex:function(){var e=this._scrollTop,t=this._recycler.getLowestIndex()+1,i=this._recycler.getHighestIndex()+1;for(t;i>t&&!(this._recycler.getElevationAtIndex(t)>e);t++);this.index=t-1},scrollBy:function(e){var t=+e||0;t&&(this._repositionHeader(),this._repositionFooter(),this._recycler.translateFrame(t)),this._determineIndex(),this._desiredIndex>-1&&this.hasMeasuredAnItem()&&this.debounce("seek",this.scrollToIndex)},_scrollResponse:function(){var e=this.$.pane.scrollTop-this._scrollTop,t=this._middleHeight-this._viewportHeight;this._scrollTop=this.$.pane.scrollTop,t<this._scrollTop&&t>0?(e-=this._scrollTop-t,this._scrollTop=t,this.scrollBy(e),this.$.pane.scrollTop=this._scrollTop):this.scrollBy(e)},_scrollHandler:function(e){e.target===this.$.pane&&(e.stopImmediatePropagation(),this.debounce("work",this._scrollResponse))},inferOffviewHeightsAfterNextMutation:function(){this._itemHeight>0&&(this._itemHeight=-this._itemHeight,this._measurements.terminate(0))},_getDataLength:function(){var e=0|(this.data&&this.data.length);return this._itemHeight?e:e?1:0},_getQueriableLength:function(e,t,i){return this._getDataLength()},_getItemHeight:function(e,t){return this._itemHeight?this._itemHeight<0?-this._itemHeight:this._itemHeight:this._viewportHeight||1},_handleRecycling:function(e,n,s,r){var o=0|e,h=null,l=this._bindingList,a=0|(l&&l.length),d=0,u=0,_=this._calculateStaticPositionOffset(o,l),c=1;if(0>s){for(;o>a;)a=l.push(null);a=l.push(h=new t(this,e)),h.value=new i(null,this.scope),h.element=document.createElement("DIV"),this.toggleClass("recycler-panel",!0,h.element),h.instance=this.instantiateTemplate(this._templateFound,0|!c),h.instance.set("scope",this.scope),h.instance.set("model",this.data[n]),Polymer.dom(h.element).appendChild(h.instance),Polymer.dom(this.$.middle).appendChild(h.element),this._addBoundResponse(h,e,o)}else if(0>n){for(h=l[o],this._removeBoundResponse(h,e,o),Polymer.dom(Polymer.dom(h.element).parentNode).removeChild(h.element),h=l[o]=null;a>0&&!l[--a];)l.pop();a++}else a>o&&(h=l[o]);h&&(s!==n&&h.instance.set("model",this.data[n]),this._measurements.isHeightKnown(n)?u=this._measurements.getHeight(n):(u=r.getHeightAtIndex(n),h.pendingResponse=1,this.debounce(n,this._getBoundResponse(h,e,o))),d=this._measurements.isElevationKnown(n)?h.location=this._measurements.getElevation(n):h.location=r.getElevationAtIndex(n),this._changeOffsetsAfter(h,u-h.height),h.height=u,h.offset=_,h.young=n,d<this._maxPixels?(this._repositionBound(h),this.debounce("rebase-transform",this._rebaseTransform,250)):this._rebaseTransform()),this.debounce("settle-down",this._settleDown,1)},_calculateStaticPositionOffset:function(e,t){var i=0|e,n=0,s=null,r=0;for(n;i>n;n++)s=t[n],r+=s.height;return r},_addBoundResponse:function(e,t,i){var n=this._boundResponse.bind(e);return this._responders.boundMap[t]=null,this._responders.boundMap[t]=n,this.addResizeListener(n,e.element),n},_getBoundResponse:function(e,t,i){return this._responders.boundMap[t]},_removeBoundResponse:function(e,t,i){var n=this._responders.boundMap[t];this.removeResizeListener(n,e.element),this._responders.boundMap[t]=null},_rebaseTransform:function(){var e=this._bindingList,t=e?e.reduce(this._minimumElevationReducer,this._someBoundLocation(e)):0;this._transformBaseline=t,e&&e.forEach(this._rebaseEachTransform,this),this._applyTransform()},_someBoundLocation:function(e){var t=e.length,i=0,n=null,s=0;for(i;t>i;i++)if(n=e[i]){s=n.location;break}return s},_minimumElevationReducer:function(e,t){return!t||e<t.location?e:t.location},_rebaseEachTransform:function(e){e&&this._repositionBound(e)},_gpu:function(){if(!this._gpuAssignedOnce)switch(this._gpuAssignedOnce=String(this.gpu),this._gpuAssignedOnce){default:this._gpuAssignedOnce="2d";case"3d":case"2d":}return this._gpuAssignedOnce},_setTranslation:function(e,t){switch(this._gpu()){case"3d":this.translate3d(0,e+"px",0,t);break;case"2d":t.style.top=e+"px"}},_repositionBound:function(e){var t=e.location-e.offset-this._transformBaseline;this._setTranslation(t,e.element)},_applyTransform:function(){this._restyleMiddleHeight(),this._repositionHeader(),this._repositionFooter(),this._repositionMiddle(),this._repositionExtent()},_restyleMiddleHeight:function(){var e=this._middleHeight-this._transformBaseline;this.$.middle.style.height=e+"px"},_assignMiddleHeight:function(e){this._middleHeight=+e||0,this._restyleMiddleHeight()},_deltaMiddleHeight:function(e){var t=(+e||0)+this._middleHeight;this._assignMiddleHeight(t)},_repositionExtent:function(){var e=-this._extentHeight+this._transformBaseline;this._setTranslation(e,this.$.extent)},_repositionMiddle:function(){var e=this._headerHeight+this._transformBaseline;this._setTranslation(e,this.$.middle)},_repositionHeader:function(){var e=-(this._middleHeight-this._transformBaseline-this._scrollTop);this._setTranslation(e,this.$.header)},_repositionFooter:function(){var e=-(this._middleHeight-this._transformBaseline-this._scrollTop);e+=this._viewportHeight,this._setTranslation(e,this.$.footer)},pathAtIndex:function(e){return 0|e},indexFromPath:function(e){return Array.isArray(e)?1===e.length?0|e[0]:-1:0|e},hasMeasuredAnItem:function(){return 0|!!this._itemHeight},getHeightAtIndex:function(){var e=null;return this._itemHeight?this._recycler.getHeightAtIndex.apply(this._recycler,arguments):(e=Polymer.dom(this.$.middle).querySelector(".recycler-panel"),e&&s(e)||null)},getMaterializedIndices:function(e){var t=Array.isArray(e)?e:[],i=this._bindingList;return i&&i.reduce(this._assignYoungFromBoundReducer,t)},_assignYoungFromBoundReducer:function(e,t,i){return e[i]=t?t.young:-1,e},_getMaterializedBoundAtIndex:function(e){var t=0|e,i=null,n=this._bindingList,s=0|(n&&n.length),e=0;for(e=0;s>e;e++)if(i=n[e],i&&i.young===t)return i;return null},hasMaterializedIndex:function(e){return this._getMaterializedBoundAtIndex(e)?1:0},querySelectorAtIndex:function(e,t){var i=this._getMaterializedBoundAtIndex(t);return i&&i.element?Polymer.dom(i.element).querySelector(e):null},querySelectorAllAtIndex:function(e,t){var i=this._getMaterializedBoundAtIndex(t);return i&&i.element?Polymer.dom(i.element).querySelectorAll(e):null},getBoundingClientRectAtIndex:function(e){var t=this._getMaterializedBoundAtIndex(e);return t&&t.element?t.element.getBoundingClientRect():null},querySelectorOfHeader:function(e){return Polymer.dom(this.$.header).querySelector(e)},querySelectorAllOfHeader:function(e){return Polymer.dom(this.$.header).querySelectorAll(e)},getBoundingClientRectOfHeader:function(){return this.$.header.getBoundingClientRect()},querySelectorOfFooter:function(e){return Polymer.dom(this.$.footer).querySelector(e)},querySelectorAllOfFooter:function(e){return Polymer.dom(this.$.footer).querySelectorAll(e)},getBoundingClientRectOfFooter:function(){return this.$.footer.getBoundingClientRect()}})}(window.Strand=window.Strand||{});</script></body></html>